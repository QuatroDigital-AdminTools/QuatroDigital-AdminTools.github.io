/*
 JSON Editor v0.7.28 - JSON Schema -> HTML Editor
 By Jeremy Dorn - https://github.com/jdorn/json-editor/
 Released under the MIT license

 Date: 2016-08-07
*/
!function(){var p;!function(){var a=!1,b=/xyz/.test(function(){window.postMessage("xyz")})?/\b_super\b/:/.*/;return p=function(){},p.extend=function d(e){function g(){!a&&this.init&&this.init.apply(this,arguments)}var f=this.prototype;a=!0;var h=new this;a=!1;for(var m in e)h[m]="function"==typeof e[m]&&"function"==typeof f[m]&&b.test(e[m])?function(a,b){return function(){var d=this._super;this._super=f[a];var e=b.apply(this,arguments);return this._super=d,e}}(m,e[m]):e[m];return g.prototype=h,g.prototype.constructor=
g,g.extend=d,g},p}();(function(){function a(a,c){c=c||{bubbles:!1,cancelable:!1,detail:void 0};var b=document.createEvent("CustomEvent");return b.initCustomEvent(a,c.bubbles,c.cancelable,c.detail),b}a.prototype=window.Event.prototype;window.CustomEvent=a})();(function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+
"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b,c){var d=(new Date).getTime(),e=Math.max(0,16-(d-a)),f=window.setTimeout(function(){b(d+e)},e);return a=d+e,f});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)})})();(function(){Array.isArray||(Array.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)})})();var l=function(a){var b,c,d;for(c=1;c<arguments.length;c++)for(d in b=arguments[c],
b)if(b.hasOwnProperty(d)){var e;if(e=b[d])e=b[d],e=!("object"!=typeof e||e.nodeType||null!==e&&e===e.window)&&!(e.constructor&&!Object.prototype.hasOwnProperty.call(e.constructor.prototype,"isPrototypeOf"));e?(a.hasOwnProperty(d)||(a[d]={}),l(a[d],b[d])):a[d]=b[d]}return a},k=function(a,b){if(a&&"object"==typeof a){var c;if(Array.isArray(a)||"number"==typeof a.length&&0<a.length&&a.length-1 in a)for(c=0;c<a.length&&!1!==b(c,a[c]);c++);else if(Object.keys){var d=Object.keys(a);for(c=0;c<d.length&&
!1!==b(d[c],a[d[c]]);c++);}else for(c in a)if(a.hasOwnProperty(c)&&!1===b(c,a[c]))break}},r=function(a,b){var c=document.createEvent("HTMLEvents");c.initEvent(b,!0,!0);a.dispatchEvent(c)},f=function(a,b){if(!(a instanceof Element))throw Error("element should be an instance of Element");b=l({},f.defaults.options,b||{});this.element=a;this.options=b;this.init()};f.prototype={constructor:f,init:function(){var a=this;this.ready=!1;var b=f.defaults.themes[this.options.theme||f.defaults.theme];if(!b)throw"Unknown theme "+
(this.options.theme||f.defaults.theme);this.schema=this.options.schema;this.theme=new b;this.template=this.options.template;this.refs=this.options.refs||{};this.uuid=0;this.__data={};(b=f.defaults.iconlibs[this.options.iconlib||f.defaults.iconlib])&&(this.iconlib=new b);this.root_container=this.theme.getContainer();this.element.appendChild(this.root_container);this.translate=this.options.translate||f.defaults.translate;this._loadExternalRefs(this.schema,function(){a._getDefinitions(a.schema);var b=
{};a.options.custom_validators&&(b.custom_validators=a.options.custom_validators);a.validator=new f.Validator(a,null,b);b=a.getEditorClass(a.schema);a.root=a.createEditor(b,{jsoneditor:a,schema:a.schema,required:!0,container:a.root_container});a.root.preBuild();a.root.build();a.root.postBuild();a.options.startval&&a.root.setValue(a.options.startval);a.validation_results=a.validator.validate(a.root.getValue());a.root.showValidationErrors(a.validation_results);a.ready=!0;window.requestAnimationFrame(function(){a.ready&&
(a.validation_results=a.validator.validate(a.root.getValue()),a.root.showValidationErrors(a.validation_results),a.trigger("ready"),a.trigger("change"))})})},getValue:function(){if(!this.ready)throw"JSON Editor not ready yet.  Listen for 'ready' event before getting the value";return this.root.getValue()},setValue:function(a){if(!this.ready)throw"JSON Editor not ready yet.  Listen for 'ready' event before setting the value";return this.root.setValue(a),this},validate:function(a){if(!this.ready)throw"JSON Editor not ready yet.  Listen for 'ready' event before validating";
return 1===arguments.length?this.validator.validate(a):this.validation_results},destroy:function(){this.destroyed||this.ready&&(this.schema=null,this.options=null,this.root.destroy(),this.root=null,this.root_container=null,this.validator=null,this.validation_results=null,this.theme=null,this.iconlib=null,this.template=null,this.__data=null,this.ready=!1,this.element.innerHTML="",this.destroyed=!0)},on:function(a,b){return this.callbacks=this.callbacks||{},this.callbacks[a]=this.callbacks[a]||[],this.callbacks[a].push(b),
this},off:function(a,b){if(a&&b){this.callbacks=this.callbacks||{};this.callbacks[a]=this.callbacks[a]||[];for(var c=[],d=0;d<this.callbacks[a].length;d++)this.callbacks[a][d]!==b&&c.push(this.callbacks[a][d]);this.callbacks[a]=c}else a?(this.callbacks=this.callbacks||{},this.callbacks[a]=[]):this.callbacks={};return this},trigger:function(a){if(this.callbacks&&this.callbacks[a]&&this.callbacks[a].length)for(var b=0;b<this.callbacks[a].length;b++)this.callbacks[a][b]();return this},setOption:function(a,
b){if("show_errors"!==a)throw"Option "+a+" must be set during instantiation and cannot be changed later";return this.options.show_errors=b,this.onChange(),this},getEditorClass:function(a){var b;if(a=this.expandSchema(a),k(f.defaults.resolvers,function(c,d){var e=d(a);if(e&&f.defaults.editors[e])return b=e,!1}),!b)throw"Unknown editor for schema "+JSON.stringify(a);if(!f.defaults.editors[b])throw"Unknown editor "+b;return f.defaults.editors[b]},createEditor:function(a,b){return b=l({},a.options||{},
b),new a(b)},onChange:function(){if(this.ready&&!this.firing_change){this.firing_change=!0;var a=this;return window.requestAnimationFrame(function(){a.firing_change=!1;a.ready&&(a.validation_results=a.validator.validate(a.root.getValue()),"never"!==a.options.show_errors?a.root.showValidationErrors(a.validation_results):a.root.showValidationErrors([]),a.trigger("change"))}),this}},compileTemplate:function(a,b){b=b||f.defaults.template;var c;if("string"==typeof b){if(!f.defaults.templates[b])throw"Unknown template engine "+
b;if(c=f.defaults.templates[b](),!c)throw"Template engine "+b+" missing required library.";}else c=b;if(!c)throw"No template engine set";if(!c.compile)throw"Invalid template engine set";return c.compile(a)},_data:function(a,b,c){if(3!==arguments.length)return a.hasAttribute("data-jsoneditor-"+b)?this.__data[a.getAttribute("data-jsoneditor-"+b)]:null;var d;a.hasAttribute("data-jsoneditor-"+b)?d=a.getAttribute("data-jsoneditor-"+b):(d=this.uuid++,a.setAttribute("data-jsoneditor-"+b,d));this.__data[d]=
c},registerEditor:function(a){return this.editors=this.editors||{},this.editors[a.path]=a,this},unregisterEditor:function(a){return this.editors=this.editors||{},this.editors[a.path]=null,this},getEditor:function(a){if(this.editors)return this.editors[a]},watch:function(a,b){return this.watchlist=this.watchlist||{},this.watchlist[a]=this.watchlist[a]||[],this.watchlist[a].push(b),this},unwatch:function(a,b){if(!this.watchlist||!this.watchlist[a])return this;if(!b)return this.watchlist[a]=null,this;
for(var c=[],d=0;d<this.watchlist[a].length;d++)this.watchlist[a][d]!==b&&c.push(this.watchlist[a][d]);return this.watchlist[a]=c.length?c:null,this},notifyWatchers:function(a){if(!this.watchlist||!this.watchlist[a])return this;for(var b=0;b<this.watchlist[a].length;b++)this.watchlist[a][b]()},isEnabled:function(){return!this.root||this.root.isEnabled()},enable:function(){this.root.enable()},disable:function(){this.root.disable()},_getDefinitions:function(a,b){if(b=b||"#/definitions/",a.definitions)for(var c in a.definitions)a.definitions.hasOwnProperty(c)&&
(this.refs[b+c]=a.definitions[c],a.definitions[c].definitions&&this._getDefinitions(a.definitions[c],b+c+"/definitions/"))},_getExternalRefs:function(a){var b={},c=function(a){for(var c in a)a.hasOwnProperty(c)&&(b[c]=!0)};a.$ref&&"object"!=typeof a.$ref&&"#"!==a.$ref.substr(0,1)&&!this.refs[a.$ref]&&(b[a.$ref]=!0);for(var d in a)if(a.hasOwnProperty(d))if(a[d]&&"object"==typeof a[d]&&Array.isArray(a[d]))for(var e=0;e<a[d].length;e++)"object"==typeof a[d][e]&&c(this._getExternalRefs(a[d][e]));else a[d]&&
"object"==typeof a[d]&&c(this._getExternalRefs(a[d]));return b},_loadExternalRefs:function(a,b){var c=this,d=this._getExternalRefs(a),e=0,g=0,f=!1;k(d,function(a){if(!c.refs[a]){if(!c.options.ajax)throw"Must set ajax option to true to load external ref "+a;c.refs[a]="loading";g++;var d=new XMLHttpRequest;d.open("GET",a,!0);d.onreadystatechange=function(){if(4==d.readyState){if(200!==d.status)throw window.console.log(d),"Failed to fetch ref via ajax- "+a;var n;try{n=JSON.parse(d.responseText)}catch(u){throw window.console.log(u),
"Failed to parse external ref "+a;}if(!n||"object"!=typeof n)throw"External ref does not contain a valid schema - "+a;c.refs[a]=n;c._loadExternalRefs(n,function(){e++;e>=g&&!f&&(f=!0,b())})}};d.send()}});g||b()},expandRefs:function(a){for(a=l({},a);a.$ref;){var b=a.$ref;delete a.$ref;this.refs[b]||(b=decodeURIComponent(b));a=this.extendSchemas(a,this.refs[b])}return a},expandSchema:function(a){var b,c=this,d=l({},a);if("object"==typeof a.type&&(Array.isArray(a.type)?k(a.type,function(b,d){"object"==
typeof d&&(a.type[b]=c.expandSchema(d))}):a.type=c.expandSchema(a.type)),"object"==typeof a.disallow&&(Array.isArray(a.disallow)?k(a.disallow,function(b,d){"object"==typeof d&&(a.disallow[b]=c.expandSchema(d))}):a.disallow=c.expandSchema(a.disallow)),a.anyOf&&k(a.anyOf,function(b,d){a.anyOf[b]=c.expandSchema(d)}),a.dependencies&&k(a.dependencies,function(b,d){"object"!=typeof d||Array.isArray(d)||(a.dependencies[b]=c.expandSchema(d))}),a.not&&(a.not=this.expandSchema(a.not)),a.allOf){for(b=0;b<a.allOf.length;b++)d=
this.extendSchemas(d,this.expandSchema(a.allOf[b]));delete d.allOf}if(a["extends"]){if(Array.isArray(a["extends"]))for(b=0;b<a["extends"].length;b++)d=this.extendSchemas(d,this.expandSchema(a["extends"][b]));else d=this.extendSchemas(d,this.expandSchema(a["extends"]));delete d["extends"]}if(a.oneOf){var e=l({},d);delete e.oneOf;for(b=0;b<a.oneOf.length;b++)d.oneOf[b]=this.extendSchemas(this.expandSchema(a.oneOf[b]),e)}return this.expandRefs(d)},extendSchemas:function(a,b){a=l({},a);b=l({},b);var c=
this,d={};return k(a,function(a,g){"undefined"!=typeof b[a]?"required"!==a&&"defaultProperties"!==a||"object"!=typeof g||!Array.isArray(g)?"type"!==a||"string"!=typeof g&&!Array.isArray(g)?"object"==typeof g&&Array.isArray(g)?d[a]=g.filter(function(c){return-1!==b[a].indexOf(c)}):"object"==typeof g&&null!==g?d[a]=c.extendSchemas(g,b[a]):d[a]=g:("string"==typeof g&&(g=[g]),"string"==typeof b.type&&(b.type=[b.type]),b.type&&b.type.length?d.type=g.filter(function(a){return-1!==b.type.indexOf(a)}):d.type=
g,1===d.type.length&&"string"==typeof d.type[0]?d.type=d.type[0]:0===d.type.length&&delete d.type):d[a]=g.concat(b[a]).reduce(function(a,b){return 0>a.indexOf(b)&&a.push(b),a},[]):d[a]=g}),k(b,function(b,c){"undefined"==typeof a[b]&&(d[b]=c)}),d}};f.defaults={themes:{},templates:{},iconlibs:{},editors:{},languages:{},resolvers:[],custom_validators:[]};f.Validator=p.extend({init:function(a,b,c){this.jsoneditor=a;this.schema=b||this.jsoneditor.schema;this.options=c||{};this.translate=this.jsoneditor.translate||
f.defaults.translate},validate:function(a){return this._validateSchema(this.schema,a)},_validateSchema:function(a,b,c){var d,e,g,n=this,h=[],m=JSON.stringify(b);if(c=c||"root",a=l({},this.jsoneditor.expandRefs(a)),a.required&&!0===a.required){if("undefined"==typeof b)return h.push({path:c,property:"required",message:this.translate("error_notset")}),h}else if("undefined"==typeof b){if(!this.jsoneditor.options.required_by_default)return h;h.push({path:c,property:"required",message:this.translate("error_notset")})}if(a["enum"]){d=
!1;for(e=0;e<a["enum"].length;e++)m===JSON.stringify(a["enum"][e])&&(d=!0);d||h.push({path:c,property:"enum",message:this.translate("error_enum")})}if(a["extends"])for(e=0;e<a["extends"].length;e++)h=h.concat(this._validateSchema(a["extends"][e],b,c));if(a.allOf)for(e=0;e<a.allOf.length;e++)h=h.concat(this._validateSchema(a.allOf[e],b,c));if(a.anyOf){d=!1;for(e=0;e<a.anyOf.length;e++)if(!this._validateSchema(a.anyOf[e],b,c).length){d=!0;break}d||h.push({path:c,property:"anyOf",message:this.translate("error_anyOf")})}if(a.oneOf){d=
0;m=[];for(e=0;e<a.oneOf.length;e++){var q=this._validateSchema(a.oneOf[e],b,c);q.length||d++;for(g=0;g<q.length;g++)q[g].path=c+".oneOf["+e+"]"+q[g].path.substr(c.length);m=m.concat(q)}1!==d&&(h.push({path:c,property:"oneOf",message:this.translate("error_oneOf",[d])}),h=h.concat(m))}if(a.not&&(this._validateSchema(a.not,b,c).length||h.push({path:c,property:"not",message:this.translate("error_not")})),a.type)if(Array.isArray(a.type)){d=!1;for(e=0;e<a.type.length;e++)if(this._checkType(a.type[e],b)){d=
!0;break}d||h.push({path:c,property:"type",message:this.translate("error_type_union")})}else this._checkType(a.type,b)||h.push({path:c,property:"type",message:this.translate("error_type",[a.type])});if(a.disallow)if(Array.isArray(a.disallow)){d=!0;for(e=0;e<a.disallow.length;e++)if(this._checkType(a.disallow[e],b)){d=!1;break}d||h.push({path:c,property:"disallow",message:this.translate("error_disallow_union")})}else this._checkType(a.disallow,b)&&h.push({path:c,property:"disallow",message:this.translate("error_disallow",
[a.disallow])});if("number"==typeof b){if(a.multipleOf||a.divisibleBy)e=a.multipleOf||a.divisibleBy,d=b/e===Math.floor(b/e),window.math?d=window.math.mod(window.math.bignumber(b),window.math.bignumber(e)).equals(0):window.Decimal&&(d=(new window.Decimal(b)).mod(new window.Decimal(e)).equals(0)),d||h.push({path:c,property:a.multipleOf?"multipleOf":"divisibleBy",message:this.translate("error_multipleOf",[e])});a.hasOwnProperty("maximum")&&(d=a.exclusiveMaximum?b<a.maximum:b<=a.maximum,window.math?d=
window.math[a.exclusiveMaximum?"smaller":"smallerEq"](window.math.bignumber(b),window.math.bignumber(a.maximum)):window.Decimal&&(d=(new window.Decimal(b))[a.exclusiveMaximum?"lt":"lte"](new window.Decimal(a.maximum))),d||h.push({path:c,property:"maximum",message:this.translate(a.exclusiveMaximum?"error_maximum_excl":"error_maximum_incl",[a.maximum])}));a.hasOwnProperty("minimum")&&(d=a.exclusiveMinimum?b>a.minimum:b>=a.minimum,window.math?d=window.math[a.exclusiveMinimum?"larger":"largerEq"](window.math.bignumber(b),
window.math.bignumber(a.minimum)):window.Decimal&&(d=(new window.Decimal(b))[a.exclusiveMinimum?"gt":"gte"](new window.Decimal(a.minimum))),d||h.push({path:c,property:"minimum",message:this.translate(a.exclusiveMinimum?"error_minimum_excl":"error_minimum_incl",[a.minimum])}))}else if("string"==typeof b)a.maxLength&&(b+"").length>a.maxLength&&h.push({path:c,property:"maxLength",message:this.translate("error_maxLength",[a.maxLength])}),a.minLength&&(b+"").length<a.minLength&&h.push({path:c,property:"minLength",
message:this.translate(1===a.minLength?"error_notempty":"error_minLength",[a.minLength])}),a.pattern&&((new RegExp(a.pattern)).test(b)||h.push({path:c,property:"pattern",message:this.translate("error_pattern",[a.pattern])}));else if("object"==typeof b&&null!==b&&Array.isArray(b)){if(a.items)if(Array.isArray(a.items))for(e=0;e<b.length;e++)if(a.items[e])h=h.concat(this._validateSchema(a.items[e],b[e],c+"."+e));else{if(!0===a.additionalItems)break;if(!a.additionalItems){if(!1===a.additionalItems){h.push({path:c,
property:"additionalItems",message:this.translate("error_additionalItems")});break}break}h=h.concat(this._validateSchema(a.additionalItems,b[e],c+"."+e))}else for(e=0;e<b.length;e++)h=h.concat(this._validateSchema(a.items,b[e],c+"."+e));if(a.maxItems&&b.length>a.maxItems&&h.push({path:c,property:"maxItems",message:this.translate("error_maxItems",[a.maxItems])}),a.minItems&&b.length<a.minItems&&h.push({path:c,property:"minItems",message:this.translate("error_minItems",[a.minItems])}),a.uniqueItems)for(g=
{},e=0;e<b.length;e++){if(d=JSON.stringify(b[e]),g[d]){h.push({path:c,property:"uniqueItems",message:this.translate("error_uniqueItems")});break}g[d]=!0}}else if("object"==typeof b&&null!==b){if(a.maxProperties){d=0;for(e in b)b.hasOwnProperty(e)&&d++;d>a.maxProperties&&h.push({path:c,property:"maxProperties",message:this.translate("error_maxProperties",[a.maxProperties])})}if(a.minProperties){d=0;for(e in b)b.hasOwnProperty(e)&&d++;d<a.minProperties&&h.push({path:c,property:"minProperties",message:this.translate("error_minProperties",
[a.minProperties])})}if(a.required&&Array.isArray(a.required))for(e=0;e<a.required.length;e++)"undefined"==typeof b[a.required[e]]&&h.push({path:c,property:"required",message:this.translate("error_required",[a.required[e]])});d={};if(a.properties)for(e in a.properties)a.properties.hasOwnProperty(e)&&(d[e]=!0,h=h.concat(this._validateSchema(a.properties[e],b[e],c+"."+e)));if(a.patternProperties)for(e in a.patternProperties)if(a.patternProperties.hasOwnProperty(e))for(g in m=new RegExp(e),b)b.hasOwnProperty(g)&&
m.test(g)&&(d[g]=!0,h=h.concat(this._validateSchema(a.patternProperties[e],b[g],c+"."+g)));if("undefined"!=typeof a.additionalProperties||!this.jsoneditor.options.no_additional_properties||a.oneOf||a.anyOf||(a.additionalProperties=!1),"undefined"!=typeof a.additionalProperties)for(e in b)if(b.hasOwnProperty(e)&&!d[e]){if(!a.additionalProperties){h.push({path:c,property:"additionalProperties",message:this.translate("error_additional_properties",[e])});break}if(!0===a.additionalProperties)break;h=h.concat(this._validateSchema(a.additionalProperties,
b[e],c+"."+e))}if(a.dependencies)for(e in a.dependencies)if(a.dependencies.hasOwnProperty(e)&&"undefined"!=typeof b[e])if(Array.isArray(a.dependencies[e]))for(g=0;g<a.dependencies[e].length;g++)"undefined"==typeof b[a.dependencies[e][g]]&&h.push({path:c,property:"dependencies",message:this.translate("error_dependency",[a.dependencies[e][g]])});else h=h.concat(this._validateSchema(a.dependencies[e],b,c))}return k(f.defaults.custom_validators,function(d,e){h=h.concat(e.call(n,a,b,c))}),this.options.custom_validators&&
k(this.options.custom_validators,function(d,e){h=h.concat(e.call(n,a,b,c))}),h},_checkType:function(a,b){return"string"==typeof a?"string"===a?"string"==typeof b:"number"===a?"number"==typeof b:"integer"===a?"number"==typeof b&&b===Math.floor(b):"boolean"===a?"boolean"==typeof b:"array"===a?Array.isArray(b):"object"===a?null!==b&&!Array.isArray(b)&&"object"==typeof b:"null"!==a||null===b:!this._validateSchema(a,b).length}});f.AbstractEditor=p.extend({onChildEditorChange:function(a){this.onChange(!0)},
notify:function(){this.jsoneditor.notifyWatchers(this.path)},change:function(){this.parent?this.parent.onChildEditorChange(this):this.jsoneditor.onChange()},onChange:function(a){this.notify();this.watch_listener&&this.watch_listener();a&&this.change()},register:function(){this.jsoneditor.registerEditor(this);this.onChange()},unregister:function(){this.jsoneditor&&this.jsoneditor.unregisterEditor(this)},getNumColumns:function(){return 12},init:function(a){this.jsoneditor=a.jsoneditor;this.theme=this.jsoneditor.theme;
this.template_engine=this.jsoneditor.template;this.iconlib=this.jsoneditor.iconlib;this.translate=this.jsoneditor.translate||f.defaults.translate;this.original_schema=a.schema;this.schema=this.jsoneditor.expandSchema(this.original_schema);this.options=l({},this.options||{},a.schema.options||{},a);a.path||this.schema.id||(this.schema.id="root");this.path=a.path||"root";this.formname=a.formname||this.path.replace(/\.([^.]+)/g,"[$1]");this.jsoneditor.options.form_name_root&&(this.formname=this.formname.replace(/^root\[/,
this.jsoneditor.options.form_name_root+"["));this.key=this.path.split(".").pop();this.parent=a.parent;this.link_watchers=[];a.container&&this.setContainer(a.container)},setContainer:function(a){this.container=a;this.schema.id&&this.container.setAttribute("data-schemaid",this.schema.id);this.schema.type&&"string"==typeof this.schema.type&&this.container.setAttribute("data-schematype",this.schema.type);this.container.setAttribute("data-schemapath",this.path)},preBuild:function(){},build:function(){},
postBuild:function(){this.setupWatchListeners();this.addLinks();this.setValue(this.getDefault(),!0);this.updateHeaderText();this.register();this.onWatchedFieldChange()},setupWatchListeners:function(){var a=this;if(this.watched={},this.schema.vars&&(this.schema.watch=this.schema.vars),this.watched_values={},this.watch_listener=function(){a.refreshWatchedFieldValues()&&a.onWatchedFieldChange()},this.register(),this.schema.hasOwnProperty("watch")){var b,c,d,e,g;for(g in this.schema.watch)if(this.schema.watch.hasOwnProperty(g)){if(b=
this.schema.watch[g],Array.isArray(b)){if(2>b.length)continue;c=[b[0]].concat(b[1].split("."))}else c=b.split("."),a.theme.closest(a.container,'[data-schemaid="'+c[0]+'"]')||c.unshift("#");if(d=c.shift(),"#"===d&&(d=a.jsoneditor.schema.id||"root"),e=a.theme.closest(a.container,'[data-schemaid="'+d+'"]'),!e)throw"Could not find ancestor node with id "+d;c=e.getAttribute("data-schemapath")+"."+c.join(".");a.jsoneditor.watch(c,a.watch_listener);a.watched[g]=c}}this.schema.headerTemplate&&(this.header_template=
this.jsoneditor.compileTemplate(this.schema.headerTemplate,this.template_engine))},addLinks:function(){if(!this.no_link_holder&&(this.link_holder=this.theme.getLinksHolder(),this.container.appendChild(this.link_holder),this.schema.links))for(var a=0;a<this.schema.links.length;a++)this.addLink(this.getLink(this.schema.links[a]))},getButton:function(a,b,c){var d="json-editor-btn-"+b;b=this.iconlib?this.iconlib.getIcon(b):null;!b&&c&&(a=c,c=null);a=this.theme.getButton(a,b,c);return a.className+=" "+
d+" ",a},setButtonText:function(a,b,c,d){return c=this.iconlib?this.iconlib.getIcon(c):null,!c&&d&&(b=d,d=null),this.theme.setButtonText(a,b,c,d)},addLink:function(a){this.link_holder&&this.link_holder.appendChild(a)},getLink:function(a){var b,c,d=(a.mediaType||"application/javascript").split("/")[0],e=this.jsoneditor.compileTemplate(a.href,this.template_engine),g=null;if(a.download&&(g=a.download),g&&!0!==g&&(g=this.jsoneditor.compileTemplate(g,this.template_engine)),"image"===d){b=this.theme.getBlockLinkHolder();
c=document.createElement("a");c.setAttribute("target","_blank");var f=document.createElement("img");this.theme.createImageLink(b,c,f);this.link_watchers.push(function(b){b=e(b);c.setAttribute("href",b);c.setAttribute("title",a.rel||b);f.setAttribute("src",b)})}else if(0<=["audio","video"].indexOf(d)){b=this.theme.getBlockLinkHolder();c=this.theme.getBlockLink();c.setAttribute("target","_blank");var h=document.createElement(d);h.setAttribute("controls","controls");this.theme.createMediaLink(b,c,h);
this.link_watchers.push(function(b){b=e(b);c.setAttribute("href",b);c.textContent=a.rel||b;h.setAttribute("src",b)})}else c=b=this.theme.getBlockLink(),b.setAttribute("target","_blank"),b.textContent=a.rel,this.link_watchers.push(function(c){c=e(c);b.setAttribute("href",c);b.textContent=a.rel||c});return g&&c&&(!0===g?c.setAttribute("download",""):this.link_watchers.push(function(a){c.setAttribute("download",g(a))})),a["class"]&&(c.className=c.className+" "+a["class"]),b},refreshWatchedFieldValues:function(){if(this.watched_values){var a=
{},b=!1;if(this.watched){var c,d,e;for(e in this.watched)this.watched.hasOwnProperty(e)&&(d=this.jsoneditor.getEditor(this.watched[e]),c=d?d.getValue():null,this.watched_values[e]!==c&&(b=!0),a[e]=c)}return a.self=this.getValue(),this.watched_values.self!==a.self&&(b=!0),this.watched_values=a,b}},getWatchedFieldValues:function(){return this.watched_values},updateHeaderText:function(){if(this.header)if(this.header.children.length)for(var a=0;a<this.header.childNodes.length;a++){if(3===this.header.childNodes[a].nodeType){this.header.childNodes[a].nodeValue=
this.getHeaderText();break}}else this.header.textContent=this.getHeaderText()},getHeaderText:function(a){return this.header_text?this.header_text:a?this.schema.title:this.getTitle()},onWatchedFieldChange:function(){var a;this.header_template&&(a=l(this.getWatchedFieldValues(),{key:this.key,i:this.key,i0:1*this.key,i1:1*this.key+1,title:this.getTitle()}),a=this.header_template(a),a!==this.header_text&&(this.header_text=a,this.updateHeaderText(),this.notify()));if(this.link_watchers.length){a=this.getWatchedFieldValues();
for(var b=0;b<this.link_watchers.length;b++)this.link_watchers[b](a)}},setValue:function(a){this.value=a},getValue:function(){return this.value},refreshValue:function(){},getChildEditors:function(){return!1},destroy:function(){var a=this;this.unregister(this);k(this.watched,function(b,c){a.jsoneditor.unwatch(c,a.watch_listener)});this.value=this.header_template=this.header_text=this.watch_listener=this.watched_values=this.watched=null;this.container&&this.container.parentNode&&this.container.parentNode.removeChild(this.container);
this.parent=this.key=this.path=this.schema=this.jsoneditor=this.container=null},getDefault:function(){if(this.schema["default"])return this.schema["default"];if(this.schema["enum"])return this.schema["enum"][0];var a=this.schema.type||this.schema.oneOf;if(a&&Array.isArray(a)&&(a=a[0]),a&&"object"==typeof a&&(a=a.type),a&&Array.isArray(a)&&(a=a[0]),"string"==typeof a){if("number"===a)return 0;if("boolean"===a)return!1;if("integer"===a)return 0;if("string"===a)return"";if("object"===a)return{};if("array"===
a)return[]}return null},getTitle:function(){return this.schema.title||this.key},enable:function(){this.disabled=!1},disable:function(){this.disabled=!0},isEnabled:function(){return!this.disabled},isRequired:function(){return"boolean"==typeof this.schema.required?this.schema.required:this.parent&&this.parent.schema&&Array.isArray(this.parent.schema.required)?-1<this.parent.schema.required.indexOf(this.key):!!this.jsoneditor.options.required_by_default},getDisplayText:function(a){var b=[],c={};k(a,
function(a,b){b.title&&(c[b.title]=c[b.title]||0,c[b.title]++);b.description&&(c[b.description]=c[b.description]||0,c[b.description]++);b.format&&(c[b.format]=c[b.format]||0,c[b.format]++);b.type&&(c[b.type]=c[b.type]||0,c[b.type]++)});k(a,function(a,d){var e;e="string"==typeof d?d:d.title&&1>=c[d.title]?d.title:d.format&&1>=c[d.format]?d.format:d.type&&1>=c[d.type]?d.type:d.description&&1>=c[d.description]?d.descripton:d.title?d.title:d.format?d.format:d.type?d.type:d.description?d.description:50>
JSON.stringify(d).length?JSON.stringify(d):"type";b.push(e)});var d={};return k(b,function(a,g){d[g]=d[g]||0;d[g]++;1<c[g]&&(b[a]=g+" "+d[g])}),b},getOption:function(a){try{throw"getOption is deprecated";}catch(b){window.console.error(b)}return this.options[a]},showValidationErrors:function(a){}});f.defaults.editors["null"]=f.AbstractEditor.extend({getValue:function(){return null},setValue:function(){this.onChange()},getNumColumns:function(){return 2}});f.defaults.editors.string=f.AbstractEditor.extend({register:function(){this._super();
this.input&&this.input.setAttribute("name",this.formname)},unregister:function(){this._super();this.input&&this.input.removeAttribute("name")},setValue:function(a,b,c){if((!this.template||c)&&(null===a||"undefined"==typeof a?a="":"object"==typeof a?a=JSON.stringify(a):"string"!=typeof a&&(a=""+a),a!==this.serialized)){var d=this.sanitize(a);this.input.value!==d&&(this.input.value=d,this.sceditor_instance?this.sceditor_instance.val(d):this.epiceditor?this.epiceditor.importFile(null,d):this.ace_editor&&
this.ace_editor.setValue(d),a=c||this.getValue()!==a,this.refreshValue(),b?this.is_dirty=!1:"change"===this.jsoneditor.options.show_errors&&(this.is_dirty=!0),this.adjust_height&&this.adjust_height(this.input),this.onChange(a))}},getNumColumns:function(){var a,b=Math.ceil(Math.max(this.getTitle().length,this.schema.maxLength||0,this.schema.minLength||0)/5);return a="textarea"===this.input_type?6:0<=["text","email"].indexOf(this.input_type)?4:2,Math.min(12,Math.max(b,a))},build:function(){var a=this;
if(this.options.compact||(this.header=this.label=this.theme.getFormInputLabel(this.getTitle())),this.schema.description&&(this.description=this.theme.getFormInputDescription(this.schema.description)),this.format=this.schema.format,!this.format&&this.schema.media&&this.schema.media.type&&(this.format=this.schema.media.type.replace(/(^(application|text)\/(x-)?(script\.)?)|(-source$)/g,"")),!this.format&&this.options.default_format&&(this.format=this.options.default_format),this.options.format&&(this.format=
this.options.format),this.format)if("textarea"===this.format)this.input_type="textarea",this.input=this.theme.getTextareaInput();else if("range"===this.format){this.input_type="range";var b=this.schema.minimum||0,c=this.schema.maximum||Math.max(100,b+1),d=1;this.schema.multipleOf&&(b%this.schema.multipleOf&&(b=Math.ceil(b/this.schema.multipleOf)*this.schema.multipleOf),c%this.schema.multipleOf&&(c=Math.floor(c/this.schema.multipleOf)*this.schema.multipleOf),d=this.schema.multipleOf);this.input=this.theme.getRangeInput(b,
c,d)}else 0<="actionscript batchfile bbcode c c++ cpp coffee csharp css dart django ejs erlang golang groovy handlebars haskell haxe html ini jade java javascript json less lisp lua makefile markdown matlab mysql objectivec pascal perl pgsql php python r ruby sass scala scss smarty sql stylus svg twig vbscript xml yaml".split(" ").indexOf(this.format)?(this.input_type=this.format,this.source_code=!0,this.input=this.theme.getTextareaInput()):(this.input_type=this.format,this.input=this.theme.getFormInputField(this.input_type));
else this.input_type="text",this.input=this.theme.getFormInputField(this.input_type);"undefined"!=typeof this.schema.maxLength&&this.input.setAttribute("maxlength",this.schema.maxLength);"undefined"!=typeof this.schema.pattern?this.input.setAttribute("pattern",this.schema.pattern):"undefined"!=typeof this.schema.minLength&&this.input.setAttribute("pattern",".{"+this.schema.minLength+",}");this.options.compact?this.container.className+=" compact":this.options.input_width&&(this.input.style.width=this.options.input_width);
(this.schema.readOnly||this.schema.readonly||this.schema.template)&&(this.always_disabled=!0,this.input.disabled=!0);this.input.addEventListener("change",function(b){if(b.preventDefault(),b.stopPropagation(),a.schema.template)return void(this.value=a.value);b=this.value;var c=a.sanitize(b);b!==c&&(this.value=c);a.is_dirty=!0;a.refreshValue();a.onChange(!0)});this.options.input_height&&(this.input.style.height=this.options.input_height);this.options.expand_height&&(this.adjust_height=function(a){if(a){var b,
c=a.offsetHeight;if(a.offsetHeight<a.scrollHeight)for(b=0;a.offsetHeight<a.scrollHeight+3&&!(100<b);)b++,c++,a.style.height=c+"px";else{for(b=0;a.offsetHeight>=a.scrollHeight+3&&!(100<b);)b++,c--,a.style.height=c+"px";a.style.height=c+1+"px"}}},this.input.addEventListener("keyup",function(b){a.adjust_height(this)}),this.input.addEventListener("change",function(b){a.adjust_height(this)}),this.adjust_height());this.format&&this.input.setAttribute("data-schemaformat",this.format);this.control=this.theme.getFormControl(this.label,
this.input,this.description);this.container.appendChild(this.control);window.requestAnimationFrame(function(){a.input.parentNode&&a.afterInputReady();a.adjust_height&&a.adjust_height(a.input)});this.schema.template?(this.template=this.jsoneditor.compileTemplate(this.schema.template,this.template_engine),this.refreshValue()):this.refreshValue()},enable:function(){this.always_disabled||(this.input.disabled=!1);this._super()},disable:function(){this.input.disabled=!0;this._super()},afterInputReady:function(){var a,
b=this;this.source_code&&(this.options.wysiwyg&&0<=["html","bbcode"].indexOf(this.input_type)&&window.jQuery&&window.jQuery.fn&&window.jQuery.fn.sceditor?(a=l({},{plugins:"html"===b.input_type?"xhtml":"bbcode",emoticonsEnabled:!1,width:"100%",height:300},f.plugins.sceditor,b.options.sceditor_options||{}),window.jQuery(b.input).sceditor(a),b.sceditor_instance=window.jQuery(b.input).sceditor("instance"),b.sceditor_instance.blur(function(){var a=window.jQuery("<div>"+b.sceditor_instance.val()+"</div>");
window.jQuery("#sceditor-start-marker,#sceditor-end-marker,.sceditor-nlf",a).remove();b.input.value=a.html();b.value=b.input.value;b.is_dirty=!0;b.onChange(!0)})):"markdown"===this.input_type&&window.EpicEditor?(this.epiceditor_container=document.createElement("div"),this.input.parentNode.insertBefore(this.epiceditor_container,this.input),this.input.style.display="none",a=l({},f.plugins.epiceditor,{container:this.epiceditor_container,clientSideStorage:!1}),this.epiceditor=(new window.EpicEditor(a)).load(),
this.epiceditor.importFile(null,this.getValue()),this.epiceditor.on("update",function(){var a=b.epiceditor.exportFile();b.input.value=a;b.value=a;b.is_dirty=!0;b.onChange(!0)})):window.ace&&(a=this.input_type,"cpp"!==a&&"c++"!==a&&"c"!==a||(a="c_cpp"),this.ace_container=document.createElement("div"),this.ace_container.style.width="100%",this.ace_container.style.position="relative",this.ace_container.style.height="400px",this.input.parentNode.insertBefore(this.ace_container,this.input),this.input.style.display=
"none",this.ace_editor=window.ace.edit(this.ace_container),this.ace_editor.setValue(this.getValue()),f.plugins.ace.theme&&this.ace_editor.setTheme("ace/theme/"+f.plugins.ace.theme),(a=window.ace.require("ace/mode/"+a))&&this.ace_editor.getSession().setMode(new a.Mode),this.ace_editor.on("change",function(){var a=b.ace_editor.getValue();b.input.value=a;b.refreshValue();b.is_dirty=!0;b.onChange(!0)})));b.theme.afterInputReady(b.input)},refreshValue:function(){this.value=this.input.value;"string"!=typeof this.value&&
(this.value="");this.serialized=this.value},destroy:function(){this.sceditor_instance?this.sceditor_instance.destroy():this.epiceditor?this.epiceditor.unload():this.ace_editor&&this.ace_editor.destroy();this.template=null;this.input&&this.input.parentNode&&this.input.parentNode.removeChild(this.input);this.label&&this.label.parentNode&&this.label.parentNode.removeChild(this.label);this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description);this._super()},
sanitize:function(a){return a},onWatchedFieldChange:function(){var a;this.template&&(a=this.getWatchedFieldValues(),this.setValue(this.template(a),!1,!0));this._super()},showValidationErrors:function(a){var b=this;if("always"===this.jsoneditor.options.show_errors||this.is_dirty||this.previous_error_setting!==this.jsoneditor.options.show_errors){this.previous_error_setting=this.jsoneditor.options.show_errors;var c=[];k(a,function(a,e){e.path===b.path&&c.push(e.message)});c.length?this.theme.addInputError(this.input,
c.join(". ")+"."):this.theme.removeInputError(this.input)}}});f.defaults.editors.number=f.defaults.editors.string.extend({sanitize:function(a){return(a+"").replace(/[^0-9\.\-eE]/g,"")},getNumColumns:function(){return 2},getValue:function(){return 1*this.value}});f.defaults.editors.integer=f.defaults.editors.number.extend({sanitize:function(a){return a+="",a.replace(/[^0-9\-]/g,"")},getNumColumns:function(){return 2}});f.defaults.editors.object=f.AbstractEditor.extend({getDefault:function(){return l({},
this.schema["default"]||{})},getChildEditors:function(){return this.editors},register:function(){if(this._super(),this.editors)for(var a in this.editors)this.editors.hasOwnProperty(a)&&this.editors[a].register()},unregister:function(){if(this._super(),this.editors)for(var a in this.editors)this.editors.hasOwnProperty(a)&&this.editors[a].unregister()},getNumColumns:function(){return Math.max(Math.min(12,this.maxwidth),3)},enable:function(){if(this.editjson_button&&(this.editjson_button.disabled=!1),
this.addproperty_button&&(this.addproperty_button.disabled=!1),this._super(),this.editors)for(var a in this.editors)this.editors.hasOwnProperty(a)&&this.editors[a].enable()},disable:function(){if(this.editjson_button&&(this.editjson_button.disabled=!0),this.addproperty_button&&(this.addproperty_button.disabled=!0),this.hideEditJSON(),this._super(),this.editors)for(var a in this.editors)this.editors.hasOwnProperty(a)&&this.editors[a].disable()},layoutEditors:function(){var a,b,c=this;if(this.row_container){this.property_order=
Object.keys(this.editors);this.property_order=this.property_order.sort(function(a,b){var d=c.editors[a].schema.propertyOrder,e=c.editors[b].schema.propertyOrder;return"number"!=typeof d&&(d=1E3),"number"!=typeof e&&(e=1E3),d-e});var d;if("grid"===this.format){var e=[];k(this.property_order,function(a,b){var d=c.editors[b];if(!d.property_removed){for(var g=!1,f=d.options.hidden?0:d.options.grid_columns||d.getNumColumns(),d=d.options.hidden?0:d.container.offsetHeight,h=0;h<e.length;h++)12>=e[h].width+
f&&(!d||.5*e[h].minh<d&&2*e[h].maxh>d)&&(g=h);!1===g&&(e.push({width:0,minh:999999,maxh:0,editors:[]}),g=e.length-1);e[g].editors.push({key:b,width:f,height:d});e[g].width+=f;e[g].minh=Math.min(e[g].minh,d);e[g].maxh=Math.max(e[g].maxh,d)}});for(a=0;a<e.length;a++)if(12>e[a].width){var g=!1,f=0;for(b=0;b<e[a].editors.length;b++)!1===g?g=b:e[a].editors[b].width>e[a].editors[g].width&&(g=b),e[a].editors[b].width*=12/e[a].width,e[a].editors[b].width=Math.floor(e[a].editors[b].width),f+=e[a].editors[b].width;
12>f&&(e[a].editors[g].width+=12-f);e[a].width=12}if(this.layout===JSON.stringify(e))return!1;this.layout=JSON.stringify(e);d=document.createElement("div");for(a=0;a<e.length;a++)for(g=this.theme.getGridRow(),d.appendChild(g),b=0;b<e[a].editors.length;b++)f=this.editors[e[a].editors[b].key],f.options.hidden?f.container.style.display="none":this.theme.setGridColumnSize(f.container,e[a].editors[b].width),g.appendChild(f.container)}else d=document.createElement("div"),k(this.property_order,function(a,
b){var e=c.editors[b];if(!e.property_removed){var g=c.theme.getGridRow();d.appendChild(g);e.options.hidden?e.container.style.display="none":c.theme.setGridColumnSize(e.container,12);g.appendChild(e.container)}});this.row_container.innerHTML="";this.row_container.appendChild(d)}},getPropertySchema:function(a){var b=this.schema.properties[a]||{},b=l({},b),c=!!this.schema.properties[a];if(this.schema.patternProperties)for(var d in this.schema.patternProperties)this.schema.patternProperties.hasOwnProperty(d)&&
(new RegExp(d)).test(a)&&(b.allOf=b.allOf||[],b.allOf.push(this.schema.patternProperties[d]),c=!0);return!c&&this.schema.additionalProperties&&"object"==typeof this.schema.additionalProperties&&(b=l({},this.schema.additionalProperties)),b},preBuild:function(){this._super();this.editors={};this.cached_editors={};var a=this;if(this.format=this.options.layout||this.options.object_layout||this.schema.format||this.jsoneditor.options.object_layout||"normal",this.schema.properties=this.schema.properties||
{},this.minwidth=0,this.maxwidth=0,this.options.table_row)k(this.schema.properties,function(b,c){var d=a.jsoneditor.getEditorClass(c);a.editors[b]=a.jsoneditor.createEditor(d,{jsoneditor:a.jsoneditor,schema:c,path:a.path+"."+b,parent:a,compact:!0,required:!0});a.editors[b].preBuild();d=a.editors[b].options.hidden?0:a.editors[b].options.grid_columns||a.editors[b].getNumColumns();a.minwidth+=d;a.maxwidth+=d}),this.no_link_holder=!0;else{if(this.options.table)throw"Not supported yet";this.schema.defaultProperties||
(this.jsoneditor.options.display_required_only||this.options.display_required_only?(this.schema.defaultProperties=[],k(this.schema.properties,function(b,c){a.isRequired({key:b,schema:c})&&a.schema.defaultProperties.push(b)})):a.schema.defaultProperties=Object.keys(a.schema.properties));a.maxwidth+=1;k(this.schema.defaultProperties,function(b,c){a.addObjectProperty(c,!0);a.editors[c]&&(a.minwidth=Math.max(a.minwidth,a.editors[c].options.grid_columns||a.editors[c].getNumColumns()),a.maxwidth+=a.editors[c].options.grid_columns||
a.editors[c].getNumColumns())})}this.property_order=Object.keys(this.editors);this.property_order=this.property_order.sort(function(b,c){var d=a.editors[b].schema.propertyOrder,e=a.editors[c].schema.propertyOrder;return"number"!=typeof d&&(d=1E3),"number"!=typeof e&&(e=1E3),d-e})},build:function(){var a=this;if(this.options.table_row)this.editor_holder=this.container,k(this.editors,function(b,d){var c=a.theme.getTableCell();a.editor_holder.appendChild(c);d.setContainer(c);d.build();d.postBuild();
a.editors[b].options.hidden&&(c.style.display="none");a.editors[b].options.input_width&&(c.style.width=a.editors[b].options.input_width)});else{if(this.options.table)throw"Not supported yet";this.header=document.createElement("span");this.header.textContent=this.getTitle();this.title=this.theme.getHeader(this.header);this.container.appendChild(this.title);this.container.style.position="relative";this.editjson_holder=this.theme.getModal();this.editjson_textarea=this.theme.getTextareaInput();this.editjson_textarea.style.height=
"170px";this.editjson_textarea.style.width="300px";this.editjson_textarea.style.display="block";this.editjson_save=this.getButton("Save","save","Save");this.editjson_save.addEventListener("click",function(b){b.preventDefault();b.stopPropagation();a.saveJSON()});this.editjson_cancel=this.getButton("Cancel","cancel","Cancel");this.editjson_cancel.addEventListener("click",function(b){b.preventDefault();b.stopPropagation();a.hideEditJSON()});this.editjson_holder.appendChild(this.editjson_textarea);this.editjson_holder.appendChild(this.editjson_save);
this.editjson_holder.appendChild(this.editjson_cancel);this.addproperty_holder=this.theme.getModal();this.addproperty_list=document.createElement("div");this.addproperty_list.style.width="295px";this.addproperty_list.style.maxHeight="160px";this.addproperty_list.style.padding="5px 0";this.addproperty_list.style.overflowY="auto";this.addproperty_list.style.overflowX="hidden";this.addproperty_list.style.paddingLeft="5px";this.addproperty_list.setAttribute("class","property-selector");this.addproperty_add=
this.getButton("add","add","add");this.addproperty_input=this.theme.getFormInputField("text");this.addproperty_input.setAttribute("placeholder","Property name...");this.addproperty_input.style.width="220px";this.addproperty_input.style.marginBottom="0";this.addproperty_input.style.display="inline-block";this.addproperty_add.addEventListener("click",function(b){if(b.preventDefault(),b.stopPropagation(),a.addproperty_input.value){if(a.editors[a.addproperty_input.value])return void window.alert("there is already a property with that name");
a.addObjectProperty(a.addproperty_input.value);a.editors[a.addproperty_input.value]&&a.editors[a.addproperty_input.value].disable();a.onChange(!0)}});this.addproperty_holder.appendChild(this.addproperty_list);this.addproperty_holder.appendChild(this.addproperty_input);this.addproperty_holder.appendChild(this.addproperty_add);var b=document.createElement("div");b.style.clear="both";this.addproperty_holder.appendChild(b);this.schema.description&&(this.description=this.theme.getDescription(this.schema.description),
this.container.appendChild(this.description));this.error_holder=document.createElement("div");this.container.appendChild(this.error_holder);this.editor_holder=this.theme.getIndentedPanel();this.container.appendChild(this.editor_holder);this.row_container=this.theme.getGridContainer();this.editor_holder.appendChild(this.row_container);k(this.editors,function(b,d){var c=a.theme.getGridColumn();a.row_container.appendChild(c);d.setContainer(c);d.build();d.postBuild()});this.title_controls=this.theme.getHeaderButtonHolder();
this.editjson_controls=this.theme.getHeaderButtonHolder();this.addproperty_controls=this.theme.getHeaderButtonHolder();this.title.appendChild(this.title_controls);this.title.appendChild(this.editjson_controls);this.title.appendChild(this.addproperty_controls);this.collapsed=!1;this.toggle_button=this.getButton("","collapse",this.translate("button_collapse"));this.title_controls.appendChild(this.toggle_button);this.toggle_button.addEventListener("click",function(b){b.preventDefault();b.stopPropagation();
a.collapsed?(a.editor_holder.style.display="",a.collapsed=!1,a.setButtonText(a.toggle_button,"","collapse",a.translate("button_collapse"))):(a.editor_holder.style.display="none",a.collapsed=!0,a.setButtonText(a.toggle_button,"","expand",a.translate("button_expand")))});this.options.collapsed&&r(this.toggle_button,"click");this.schema.options&&"undefined"!=typeof this.schema.options.disable_collapse?this.schema.options.disable_collapse&&(this.toggle_button.style.display="none"):this.jsoneditor.options.disable_collapse&&
(this.toggle_button.style.display="none");this.editjson_button=this.getButton("JSON","edit","Edit JSON");this.editjson_button.addEventListener("click",function(b){b.preventDefault();b.stopPropagation();a.toggleEditJSON()});this.editjson_controls.appendChild(this.editjson_button);this.editjson_controls.appendChild(this.editjson_holder);this.schema.options&&"undefined"!=typeof this.schema.options.disable_edit_json?this.schema.options.disable_edit_json&&(this.editjson_button.style.display="none"):this.jsoneditor.options.disable_edit_json&&
(this.editjson_button.style.display="none");this.addproperty_button=this.getButton("Properties","edit","Object Properties");this.addproperty_button.addEventListener("click",function(b){b.preventDefault();b.stopPropagation();a.toggleAddProperty()});this.addproperty_controls.appendChild(this.addproperty_button);this.addproperty_controls.appendChild(this.addproperty_holder);this.refreshAddProperties()}this.options.table_row?(this.editor_holder=this.container,k(this.property_order,function(b,d){a.editor_holder.appendChild(a.editors[d].container)})):
(this.layoutEditors(),this.layoutEditors())},showEditJSON:function(){this.editjson_holder&&(this.hideAddProperty(),this.editjson_holder.style.left=this.editjson_button.offsetLeft+"px",this.editjson_holder.style.top=this.editjson_button.offsetTop+this.editjson_button.offsetHeight+"px",this.editjson_textarea.value=JSON.stringify(this.getValue(),null,2),this.disable(),this.editjson_holder.style.display="",this.editjson_button.disabled=!1,this.editing_json=!0)},hideEditJSON:function(){this.editjson_holder&&
this.editing_json&&(this.editjson_holder.style.display="none",this.enable(),this.editing_json=!1)},saveJSON:function(){if(this.editjson_holder)try{var a=JSON.parse(this.editjson_textarea.value);this.setValue(a);this.hideEditJSON()}catch(b){throw window.alert("invalid JSON"),b;}},toggleEditJSON:function(){this.editing_json?this.hideEditJSON():this.showEditJSON()},insertPropertyControlUsingPropertyOrder:function(a,b,c){var d;this.schema.properties[a]&&(d=this.schema.properties[a].propertyOrder);"number"!=
typeof d&&(d=1E3);b.propertyOrder=d;for(a=0;a<c.childNodes.length;a++)if(d=c.childNodes[a],b.propertyOrder<d.propertyOrder){this.addproperty_list.insertBefore(b,d);b=null;break}b&&this.addproperty_list.appendChild(b)},addPropertyCheckbox:function(a){var b,c,d,e,g=this;return b=g.theme.getCheckbox(),b.style.width="auto",d=this.schema.properties[a]&&this.schema.properties[a].title?this.schema.properties[a].title:a,c=g.theme.getCheckboxLabel(d),e=g.theme.getFormControl(c,b),e.style.paddingBottom=e.style.marginBottom=
e.style.paddingTop=e.style.marginTop=0,e.style.height="auto",this.insertPropertyControlUsingPropertyOrder(a,e,this.addproperty_list),b.checked=a in this.editors,b.addEventListener("change",function(){b.checked?g.addObjectProperty(a):g.removeObjectProperty(a);g.onChange(!0)}),g.addproperty_checkboxes[a]=b,b},showAddProperty:function(){this.addproperty_holder&&(this.hideEditJSON(),this.addproperty_holder.style.left=this.addproperty_button.offsetLeft+"px",this.addproperty_holder.style.top=this.addproperty_button.offsetTop+
this.addproperty_button.offsetHeight+"px",this.disable(),this.adding_property=!0,this.addproperty_button.disabled=!1,this.addproperty_holder.style.display="",this.refreshAddProperties())},hideAddProperty:function(){this.addproperty_holder&&this.adding_property&&(this.addproperty_holder.style.display="none",this.enable(),this.adding_property=!1)},toggleAddProperty:function(){this.adding_property?this.hideAddProperty():this.showAddProperty()},removeObjectProperty:function(a){this.editors[a]&&(this.editors[a].unregister(),
delete this.editors[a],this.refreshValue(),this.layoutEditors())},addObjectProperty:function(a,b){if(!this.editors[a]){if(this.cached_editors[a]){if(this.editors[a]=this.cached_editors[a],b)return;this.editors[a].register()}else{if(!(this.canHaveAdditionalProperties()||this.schema.properties&&this.schema.properties[a]))return;var c=this.getPropertySchema(a),d=this.jsoneditor.getEditorClass(c);(this.editors[a]=this.jsoneditor.createEditor(d,{jsoneditor:this.jsoneditor,schema:c,path:this.path+"."+a,
parent:this}),this.editors[a].preBuild(),b)||(c=this.theme.getChildEditorHolder(),this.editor_holder.appendChild(c),this.editors[a].setContainer(c),this.editors[a].build(),this.editors[a].postBuild());this.cached_editors[a]=this.editors[a]}b||(this.refreshValue(),this.layoutEditors())}},onChildEditorChange:function(a){this.refreshValue();this._super(a)},canHaveAdditionalProperties:function(){return"boolean"==typeof this.schema.additionalProperties?this.schema.additionalProperties:!this.jsoneditor.options.no_additional_properties},
destroy:function(){k(this.cached_editors,function(a,b){b.destroy()});this.editor_holder&&(this.editor_holder.innerHTML="");this.title&&this.title.parentNode&&this.title.parentNode.removeChild(this.title);this.error_holder&&this.error_holder.parentNode&&this.error_holder.parentNode.removeChild(this.error_holder);this.cached_editors=this.editors=null;this.editor_holder&&this.editor_holder.parentNode&&this.editor_holder.parentNode.removeChild(this.editor_holder);this.editor_holder=null;this._super()},
getValue:function(){var a=this._super();if(this.jsoneditor.options.remove_empty_properties||this.options.remove_empty_properties)for(var b in a)a.hasOwnProperty(b)&&(a[b]||delete a[b]);return a},refreshValue:function(){this.value={};for(var a in this.editors)this.editors.hasOwnProperty(a)&&(this.value[a]=this.editors[a].getValue());this.adding_property&&this.refreshAddProperties()},refreshAddProperties:function(){if(this.options.disable_properties||!1!==this.options.disable_properties&&this.jsoneditor.options.disable_properties)return void(this.addproperty_controls.style.display=
"none");var a,b,c=0,d=!1;for(a in this.editors)this.editors.hasOwnProperty(a)&&c++;b=this.canHaveAdditionalProperties()&&!("undefined"!=typeof this.schema.maxProperties&&c>=this.schema.maxProperties);this.addproperty_checkboxes&&(this.addproperty_list.innerHTML="");this.addproperty_checkboxes={};for(a in this.cached_editors)this.cached_editors.hasOwnProperty(a)&&(this.addPropertyCheckbox(a),this.isRequired(this.cached_editors[a])&&a in this.editors&&(this.addproperty_checkboxes[a].disabled=!0),"undefined"!=
typeof this.schema.minProperties&&c<=this.schema.minProperties?(this.addproperty_checkboxes[a].disabled=this.addproperty_checkboxes[a].checked,this.addproperty_checkboxes[a].checked||(d=!0)):a in this.editors?d=!0:b||this.schema.properties.hasOwnProperty(a)?(this.addproperty_checkboxes[a].disabled=!1,d=!0):this.addproperty_checkboxes[a].disabled=!0);this.canHaveAdditionalProperties()&&(d=!0);for(a in this.schema.properties)this.schema.properties.hasOwnProperty(a)&&(this.cached_editors[a]||(d=!0,this.addPropertyCheckbox(a)));
d?this.canHaveAdditionalProperties()?b?this.addproperty_add.disabled=!1:this.addproperty_add.disabled=!0:(this.addproperty_add.style.display="none",this.addproperty_input.style.display="none"):(this.hideAddProperty(),this.addproperty_controls.style.display="none")},isRequired:function(a){return"boolean"==typeof a.schema.required?a.schema.required:Array.isArray(this.schema.required)?-1<this.schema.required.indexOf(a.key):!!this.jsoneditor.options.required_by_default},setValue:function(a,b){var c=this;
a=a||{};("object"!=typeof a||Array.isArray(a))&&(a={});k(this.cached_editors,function(d,e){"undefined"!=typeof a[d]?(c.addObjectProperty(d),e.setValue(a[d],b)):b||c.isRequired(e)?e.setValue(e.getDefault(),b):c.removeObjectProperty(d)});k(a,function(a,e){c.cached_editors[a]||(c.addObjectProperty(a),c.editors[a]&&c.editors[a].setValue(e,b))});this.refreshValue();this.layoutEditors();this.onChange()},showValidationErrors:function(a){var b=this,c=[],d=[];if(k(a,function(a,g){g.path===b.path?c.push(g):
d.push(g)}),this.error_holder)c.length?(this.error_holder.innerHTML="",this.error_holder.style.display="",k(c,function(a,c){b.error_holder.appendChild(b.theme.getErrorMessage(c.message))})):this.error_holder.style.display="none";this.options.table_row&&(c.length?this.theme.addTableRowError(this.container):this.theme.removeTableRowError(this.container));k(this.editors,function(a,b){b.showValidationErrors(d)})}});f.defaults.editors.array=f.AbstractEditor.extend({getDefault:function(){return this.schema["default"]||
[]},register:function(){if(this._super(),this.rows)for(var a=0;a<this.rows.length;a++)this.rows[a].register()},unregister:function(){if(this._super(),this.rows)for(var a=0;a<this.rows.length;a++)this.rows[a].unregister()},getNumColumns:function(){var a=this.getItemInfo(0);return this.tabs_holder?Math.max(Math.min(12,a.width+2),4):a.width},enable:function(){if(this.add_row_button&&(this.add_row_button.disabled=!1),this.remove_all_rows_button&&(this.remove_all_rows_button.disabled=!1),this.delete_last_row_button&&
(this.delete_last_row_button.disabled=!1),this.rows)for(var a=0;a<this.rows.length;a++)this.rows[a].enable(),this.rows[a].moveup_button&&(this.rows[a].moveup_button.disabled=!1),this.rows[a].movedown_button&&(this.rows[a].movedown_button.disabled=!1),this.rows[a].delete_button&&(this.rows[a].delete_button.disabled=!1);this._super()},disable:function(){if(this.add_row_button&&(this.add_row_button.disabled=!0),this.remove_all_rows_button&&(this.remove_all_rows_button.disabled=!0),this.delete_last_row_button&&
(this.delete_last_row_button.disabled=!0),this.rows)for(var a=0;a<this.rows.length;a++)this.rows[a].disable(),this.rows[a].moveup_button&&(this.rows[a].moveup_button.disabled=!0),this.rows[a].movedown_button&&(this.rows[a].movedown_button.disabled=!0),this.rows[a].delete_button&&(this.rows[a].delete_button.disabled=!0);this._super()},preBuild:function(){this._super();this.rows=[];this.row_cache=[];this.hide_delete_all_rows_buttons=(this.hide_delete_buttons=this.options.disable_array_delete||this.jsoneditor.options.disable_array_delete)||
this.options.disable_array_delete_all_rows||this.jsoneditor.options.disable_array_delete_all_rows;this.hide_delete_last_row_buttons=this.hide_delete_buttons||this.options.disable_array_delete_last_row||this.jsoneditor.options.disable_array_delete_last_row;this.hide_move_buttons=this.options.disable_array_reorder||this.jsoneditor.options.disable_array_reorder;this.hide_add_button=this.options.disable_array_add||this.jsoneditor.options.disable_array_add},build:function(){this.options.compact?(this.panel=
this.theme.getIndentedPanel(),this.container.appendChild(this.panel),this.controls=this.theme.getButtonHolder(),this.panel.appendChild(this.controls),this.row_holder=document.createElement("div"),this.panel.appendChild(this.row_holder)):(this.header=document.createElement("span"),this.header.textContent=this.getTitle(),this.title=this.theme.getHeader(this.header),this.container.appendChild(this.title),this.title_controls=this.theme.getHeaderButtonHolder(),this.title.appendChild(this.title_controls),
this.schema.description&&(this.description=this.theme.getDescription(this.schema.description),this.container.appendChild(this.description)),this.error_holder=document.createElement("div"),this.container.appendChild(this.error_holder),"tabs"===this.schema.format?(this.controls=this.theme.getHeaderButtonHolder(),this.title.appendChild(this.controls),this.tabs_holder=this.theme.getTabHolder(),this.container.appendChild(this.tabs_holder),this.row_holder=this.theme.getTabContentHolder(this.tabs_holder),
this.active_tab=null):(this.panel=this.theme.getIndentedPanel(),this.container.appendChild(this.panel),this.row_holder=document.createElement("div"),this.panel.appendChild(this.row_holder),this.controls=this.theme.getButtonHolder(),this.panel.appendChild(this.controls)));this.addControls()},onChildEditorChange:function(a){this.refreshValue();this.refreshTabs(!0);this._super(a)},getItemTitle:function(){this.item_title||(this.schema.items&&!Array.isArray(this.schema.items)?this.item_title=this.jsoneditor.expandRefs(this.schema.items).title||
"item":this.item_title="item");return this.item_title},getItemSchema:function(a){return Array.isArray(this.schema.items)?a>=this.schema.items.length?!0===this.schema.additionalItems?{}:this.schema.additionalItems?l({},this.schema.additionalItems):void 0:l({},this.schema.items[a]):this.schema.items?l({},this.schema.items):{}},getItemInfo:function(a){a=this.getItemSchema(a);this.item_info=this.item_info||{};var b=JSON.stringify(a);return"undefined"!=typeof this.item_info[b]?this.item_info[b]:(a=this.jsoneditor.expandRefs(a),
this.item_info[b]={title:a.title||"item","default":a["default"],width:12,child_editors:a.properties||a.items},this.item_info[b])},getElementEditor:function(a){var b=this.getItemInfo(a),c=this.getItemSchema(a),c=this.jsoneditor.expandRefs(c);c.title=b.title+" "+(a+1);var d=this.jsoneditor.getEditorClass(c),b=this.tabs_holder?this.theme.getTabContent():b.child_editors?this.theme.getChildEditorHolder():this.theme.getIndentedPanel();this.row_holder.appendChild(b);a=this.jsoneditor.createEditor(d,{jsoneditor:this.jsoneditor,
schema:c,container:b,path:this.path+"."+a,parent:this,required:!0});return a.preBuild(),a.build(),a.postBuild(),a.title_controls||(a.array_controls=this.theme.getButtonHolder(),b.appendChild(a.array_controls)),a},destroy:function(){this.empty(!0);this.title&&this.title.parentNode&&this.title.parentNode.removeChild(this.title);this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description);this.row_holder&&this.row_holder.parentNode&&this.row_holder.parentNode.removeChild(this.row_holder);
this.controls&&this.controls.parentNode&&this.controls.parentNode.removeChild(this.controls);this.panel&&this.panel.parentNode&&this.panel.parentNode.removeChild(this.panel);this.rows=this.row_cache=this.title=this.description=this.row_holder=this.panel=this.controls=null;this._super()},empty:function(a){if(this.rows){var b=this;k(this.rows,function(c,d){a&&(d.tab&&d.tab.parentNode&&d.tab.parentNode.removeChild(d.tab),b.destroyRow(d,!0),b.row_cache[c]=null);b.rows[c]=null});b.rows=[];a&&(b.row_cache=
[])}},destroyRow:function(a,b){var c=a.container;b?(a.destroy(),c.parentNode&&c.parentNode.removeChild(c),a.tab&&a.tab.parentNode&&a.tab.parentNode.removeChild(a.tab)):(a.tab&&(a.tab.style.display="none"),c.style.display="none",a.unregister())},getMax:function(){return Array.isArray(this.schema.items)&&!1===this.schema.additionalItems?Math.min(this.schema.items.length,this.schema.maxItems||1/0):this.schema.maxItems||1/0},refreshTabs:function(a){var b=this;k(this.rows,function(c,d){d.tab&&(a?d.tab_text.textContent=
d.getHeaderText():d.tab===b.active_tab?(b.theme.markTabActive(d.tab),d.container.style.display=""):(b.theme.markTabInactive(d.tab),d.container.style.display="none"))})},setValue:function(a,b){a=a||[];Array.isArray(a)||(a=[a]);if(JSON.stringify(a)!==this.serialized){if(this.schema.minItems)for(;a.length<this.schema.minItems;)a.push(this.getItemInfo(a.length)["default"]);this.getMax()&&a.length>this.getMax()&&(a=a.slice(0,this.getMax()));var c=this;k(a,function(a,d){c.rows[a]?c.rows[a].setValue(d,b):
c.row_cache[a]?(c.rows[a]=c.row_cache[a],c.rows[a].setValue(d,b),c.rows[a].container.style.display="",c.rows[a].tab&&(c.rows[a].tab.style.display=""),c.rows[a].register()):c.addRow(d,b)});for(var d=a.length;d<c.rows.length;d++)c.destroyRow(c.rows[d]),c.rows[d]=null;c.rows=c.rows.slice(0,a.length);var e=null;k(c.rows,function(a,b){if(b.tab===c.active_tab)return e=b.tab,!1});!e&&c.rows.length&&(e=c.rows[0].tab);c.active_tab=e;c.refreshValue(b);c.refreshTabs(!0);c.refreshTabs();c.onChange()}},refreshValue:function(a){var b=
this,c=this.value?this.value.length:0;if(this.value=[],k(this.rows,function(a,c){b.value[a]=c.getValue()}),c!==this.value.length||a){var d=this.schema.minItems&&this.schema.minItems>=this.rows.length;k(this.rows,function(a,c){c.movedown_button&&(a===b.rows.length-1?c.movedown_button.style.display="none":c.movedown_button.style.display="");c.delete_button&&(d?c.delete_button.style.display="none":c.delete_button.style.display="");b.value[a]=c.getValue()});a=!1;this.value.length?1===this.value.length?
(this.remove_all_rows_button.style.display="none",d||this.hide_delete_last_row_buttons?this.delete_last_row_button.style.display="none":(this.delete_last_row_button.style.display="",a=!0)):(d||this.hide_delete_last_row_buttons?this.delete_last_row_button.style.display="none":(this.delete_last_row_button.style.display="",a=!0),d||this.hide_delete_all_rows_buttons?this.remove_all_rows_button.style.display="none":(this.remove_all_rows_button.style.display="",a=!0)):(this.delete_last_row_button.style.display=
"none",this.remove_all_rows_button.style.display="none");this.getMax()&&this.getMax()<=this.rows.length||this.hide_add_button?this.add_row_button.style.display="none":(this.add_row_button.style.display="",a=!0);!this.collapsed&&a?this.controls.style.display="inline-block":this.controls.style.display="none"}},addRow:function(a,b){var c=this,d=this.rows.length;c.rows[d]=this.getElementEditor(d);c.row_cache[d]=c.rows[d];c.tabs_holder&&(c.rows[d].tab_text=document.createElement("span"),c.rows[d].tab_text.textContent=
c.rows[d].getHeaderText(),c.rows[d].tab=c.theme.getTab(c.rows[d].tab_text),c.rows[d].tab.addEventListener("click",function(a){c.active_tab=c.rows[d].tab;c.refreshTabs();a.preventDefault();a.stopPropagation()}),c.theme.addTab(c.tabs_holder,c.rows[d].tab));var e=c.rows[d].title_controls||c.rows[d].array_controls;c.hide_delete_buttons||(c.rows[d].delete_button=this.getButton(c.getItemTitle(),"delete",this.translate("button_delete_row_title",[c.getItemTitle()])),c.rows[d].delete_button.className+=" delete",
c.rows[d].delete_button.setAttribute("data-i",d),c.rows[d].delete_button.addEventListener("click",function(a){a.preventDefault();a.stopPropagation();var b=1*this.getAttribute("data-i");a=c.getValue();var d=[],e=null;k(a,function(a,g){return a===b?void(c.rows[a].tab===c.active_tab&&(c.rows[a+1]?e=c.rows[a].tab:a&&(e=c.rows[a-1].tab))):void d.push(g)});c.setValue(d);e&&(c.active_tab=e,c.refreshTabs());c.onChange(!0)}),e&&e.appendChild(c.rows[d].delete_button));d&&!c.hide_move_buttons&&(c.rows[d].moveup_button=
this.getButton("","moveup",this.translate("button_move_up_title")),c.rows[d].moveup_button.className+=" moveup",c.rows[d].moveup_button.setAttribute("data-i",d),c.rows[d].moveup_button.addEventListener("click",function(a){a.preventDefault();a.stopPropagation();a=1*this.getAttribute("data-i");if(!(0>=a)){var b=c.getValue(),d=b[a-1];b[a-1]=b[a];b[a]=d;c.setValue(b);c.active_tab=c.rows[a-1].tab;c.refreshTabs();c.onChange(!0)}}),e&&e.appendChild(c.rows[d].moveup_button));c.hide_move_buttons||(c.rows[d].movedown_button=
this.getButton("","movedown",this.translate("button_move_down_title")),c.rows[d].movedown_button.className+=" movedown",c.rows[d].movedown_button.setAttribute("data-i",d),c.rows[d].movedown_button.addEventListener("click",function(a){a.preventDefault();a.stopPropagation();a=1*this.getAttribute("data-i");var b=c.getValue();if(!(a>=b.length-1)){var d=b[a+1];b[a+1]=b[a];b[a]=d;c.setValue(b);c.active_tab=c.rows[a+1].tab;c.refreshTabs();c.onChange(!0)}}),e&&e.appendChild(c.rows[d].movedown_button));a&&
c.rows[d].setValue(a,b);c.refreshTabs()},addControls:function(){var a=this;this.collapsed=!1;this.toggle_button=this.getButton("","collapse",this.translate("button_collapse"));this.title_controls.appendChild(this.toggle_button);var b=a.row_holder.style.display,c=a.controls.style.display;this.toggle_button.addEventListener("click",function(d){d.preventDefault();d.stopPropagation();a.collapsed?(a.collapsed=!1,a.panel&&(a.panel.style.display=""),a.row_holder.style.display=b,a.tabs_holder&&(a.tabs_holder.style.display=
""),a.controls.style.display=c,a.setButtonText(this,"","collapse",a.translate("button_collapse"))):(a.collapsed=!0,a.row_holder.style.display="none",a.tabs_holder&&(a.tabs_holder.style.display="none"),a.controls.style.display="none",a.panel&&(a.panel.style.display="none"),a.setButtonText(this,"","expand",a.translate("button_expand")))});this.options.collapsed&&r(this.toggle_button,"click");this.schema.options&&"undefined"!=typeof this.schema.options.disable_collapse?this.schema.options.disable_collapse&&
(this.toggle_button.style.display="none"):this.jsoneditor.options.disable_collapse&&(this.toggle_button.style.display="none");this.add_row_button=this.getButton(this.getItemTitle(),"add",this.translate("button_add_row_title",[this.getItemTitle()]));this.add_row_button.addEventListener("click",function(b){b.preventDefault();b.stopPropagation();b=a.rows.length;a.row_cache[b]?(a.rows[b]=a.row_cache[b],a.rows[b].setValue(a.rows[b].getDefault(),!0),a.rows[b].container.style.display="",a.rows[b].tab&&(a.rows[b].tab.style.display=
""),a.rows[b].register()):a.addRow();a.active_tab=a.rows[b].tab;a.refreshTabs();a.refreshValue();a.onChange(!0)});a.controls.appendChild(this.add_row_button);this.delete_last_row_button=this.getButton(this.translate("button_delete_last",[this.getItemTitle()]),"delete",this.translate("button_delete_last_title",[this.getItemTitle()]));this.delete_last_row_button.addEventListener("click",function(b){b.preventDefault();b.stopPropagation();b=a.getValue();var c=null;1<a.rows.length&&a.rows[a.rows.length-
1].tab===a.active_tab&&(c=a.rows[a.rows.length-2].tab);b.pop();a.setValue(b);c&&(a.active_tab=c,a.refreshTabs());a.onChange(!0)});a.controls.appendChild(this.delete_last_row_button);this.remove_all_rows_button=this.getButton(this.translate("button_delete_all"),"delete",this.translate("button_delete_all_title"));this.remove_all_rows_button.addEventListener("click",function(b){b.preventDefault();b.stopPropagation();a.setValue([]);a.onChange(!0)});a.controls.appendChild(this.remove_all_rows_button);
a.tabs&&(this.add_row_button.style.width="100%",this.add_row_button.style.textAlign="left",this.add_row_button.style.marginBottom="3px",this.delete_last_row_button.style.width="100%",this.delete_last_row_button.style.textAlign="left",this.delete_last_row_button.style.marginBottom="3px",this.remove_all_rows_button.style.width="100%",this.remove_all_rows_button.style.textAlign="left",this.remove_all_rows_button.style.marginBottom="3px")},showValidationErrors:function(a){var b=this,c=[],d=[];if(k(a,
function(a,g){g.path===b.path?c.push(g):d.push(g)}),this.error_holder)c.length?(this.error_holder.innerHTML="",this.error_holder.style.display="",k(c,function(a,c){b.error_holder.appendChild(b.theme.getErrorMessage(c.message))})):this.error_holder.style.display="none";k(this.rows,function(a,b){b.showValidationErrors(d)})}});f.defaults.editors.table=f.defaults.editors.array.extend({register:function(){if(this._super(),this.rows)for(var a=0;a<this.rows.length;a++)this.rows[a].register()},unregister:function(){if(this._super(),
this.rows)for(var a=0;a<this.rows.length;a++)this.rows[a].unregister()},getNumColumns:function(){return Math.max(Math.min(12,this.width),3)},preBuild:function(){var a=this.jsoneditor.expandRefs(this.schema.items||{});this.item_title=a.title||"row";this.item_default=a["default"]||null;this.item_has_child_editors=a.properties||a.items;this.width=12;this._super()},build:function(){this.table=this.theme.getTable();this.container.appendChild(this.table);this.thead=this.theme.getTableHead();this.table.appendChild(this.thead);
this.header_row=this.theme.getTableRow();this.thead.appendChild(this.header_row);this.row_holder=this.theme.getTableBody();this.table.appendChild(this.row_holder);var a=this.getElementEditor(0,!0);if(this.item_default=a.getDefault(),this.width=a.getNumColumns()+2,this.options.compact?(this.panel=document.createElement("div"),this.container.appendChild(this.panel)):(this.title=this.theme.getHeader(this.getTitle()),this.container.appendChild(this.title),this.title_controls=this.theme.getHeaderButtonHolder(),
this.title.appendChild(this.title_controls),this.schema.description&&(this.description=this.theme.getDescription(this.schema.description),this.container.appendChild(this.description)),this.panel=this.theme.getIndentedPanel(),this.container.appendChild(this.panel),this.error_holder=document.createElement("div"),this.panel.appendChild(this.error_holder)),this.panel.appendChild(this.table),this.controls=this.theme.getButtonHolder(),this.panel.appendChild(this.controls),this.item_has_child_editors)for(var b=
a.getChildEditors(),c=a.property_order||Object.keys(b),d=0;d<c.length;d++){var e=this.theme.getTableHeaderCell(b[c[d]].getTitle());b[c[d]].options.hidden&&(e.style.display="none");this.header_row.appendChild(e)}else this.header_row.appendChild(this.theme.getTableHeaderCell(this.item_title));a.destroy();this.row_holder.innerHTML="";this.controls_header_cell=this.theme.getTableHeaderCell(" ");this.header_row.appendChild(this.controls_header_cell);this.addControls()},onChildEditorChange:function(a){this.refreshValue();
this._super()},getItemDefault:function(){return l({},{"default":this.item_default})["default"]},getItemTitle:function(){return this.item_title},getElementEditor:function(a,b){var c=l({},this.schema.items),d=this.jsoneditor.getEditorClass(c,this.jsoneditor),e=this.row_holder.appendChild(this.theme.getTableRow()),g=e;this.item_has_child_editors||(g=this.theme.getTableCell(),e.appendChild(g));c=this.jsoneditor.createEditor(d,{jsoneditor:this.jsoneditor,schema:c,container:g,path:this.path+"."+a,parent:this,
compact:!0,table_row:!0});return c.preBuild(),b||(c.build(),c.postBuild(),c.controls_cell=e.appendChild(this.theme.getTableCell()),c.row=e,c.table_controls=this.theme.getButtonHolder(),c.controls_cell.appendChild(c.table_controls),c.table_controls.style.margin=0,c.table_controls.style.padding=0),c},destroy:function(){this.innerHTML="";this.title&&this.title.parentNode&&this.title.parentNode.removeChild(this.title);this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description);
this.row_holder&&this.row_holder.parentNode&&this.row_holder.parentNode.removeChild(this.row_holder);this.table&&this.table.parentNode&&this.table.parentNode.removeChild(this.table);this.panel&&this.panel.parentNode&&this.panel.parentNode.removeChild(this.panel);this.rows=this.title=this.description=this.row_holder=this.table=this.panel=null;this._super()},setValue:function(a,b){if(a=a||[],this.schema.minItems)for(;a.length<this.schema.minItems;)a.push(this.getItemDefault());this.schema.maxItems&&
a.length>this.schema.maxItems&&(a=a.slice(0,this.schema.maxItems));if(JSON.stringify(a)!==this.serialized){var c=!1,d=this;k(a,function(a,b){d.rows[a]?d.rows[a].setValue(b):(d.addRow(b),c=!0)});for(var e=a.length;e<d.rows.length;e++){var g=d.rows[e].container;d.item_has_child_editors||d.rows[e].row.parentNode.removeChild(d.rows[e].row);d.rows[e].destroy();g.parentNode&&g.parentNode.removeChild(g);d.rows[e]=null;c=!0}d.rows=d.rows.slice(0,a.length);d.refreshValue();(c||b)&&d.refreshRowButtons();d.onChange()}},
refreshRowButtons:function(){var a=this,b=this.schema.minItems&&this.schema.minItems>=this.rows.length,c=!1;k(this.rows,function(d,g){g.movedown_button&&(d===a.rows.length-1?g.movedown_button.style.display="none":(c=!0,g.movedown_button.style.display=""));g.delete_button&&(b?g.delete_button.style.display="none":(c=!0,g.delete_button.style.display=""));g.moveup_button&&(c=!0)});k(this.rows,function(a,b){c?b.controls_cell.style.display="":b.controls_cell.style.display="none"});c?this.controls_header_cell.style.display=
"":this.controls_header_cell.style.display="none";var d=!1;this.value.length?1===this.value.length?(this.table.style.display="",this.remove_all_rows_button.style.display="none",b||this.hide_delete_last_row_buttons?this.delete_last_row_button.style.display="none":(this.delete_last_row_button.style.display="",d=!0)):(this.table.style.display="",b||this.hide_delete_last_row_buttons?this.delete_last_row_button.style.display="none":(this.delete_last_row_button.style.display="",d=!0),b||this.hide_delete_all_rows_buttons?
this.remove_all_rows_button.style.display="none":(this.remove_all_rows_button.style.display="",d=!0)):(this.delete_last_row_button.style.display="none",this.remove_all_rows_button.style.display="none",this.table.style.display="none");this.schema.maxItems&&this.schema.maxItems<=this.rows.length||this.hide_add_button?this.add_row_button.style.display="none":(this.add_row_button.style.display="",d=!0);d?this.controls.style.display="":this.controls.style.display="none"},refreshValue:function(){var a=
this;this.value=[];k(this.rows,function(b,c){a.value[b]=c.getValue()});this.serialized=JSON.stringify(this.value)},addRow:function(a){var b=this,c=this.rows.length;b.rows[c]=this.getElementEditor(c);var d=b.rows[c].table_controls;this.hide_delete_buttons||(b.rows[c].delete_button=this.getButton("","delete",this.translate("button_delete_row_title_short")),b.rows[c].delete_button.className+=" delete fa fa-trash btn-danger",b.rows[c].delete_button.setAttribute("data-i",c),b.rows[c].delete_button.addEventListener("click",
function(a){a.preventDefault();a.stopPropagation();var c=1*this.getAttribute("data-i");a=b.getValue();var d=[];k(a,function(a,b){a!==c&&d.push(b)});b.setValue(d);b.onChange(!0)}),d.appendChild(b.rows[c].delete_button));c&&!this.hide_move_buttons&&(b.rows[c].moveup_button=this.getButton("","moveup",this.translate("button_move_up_title")),b.rows[c].moveup_button.className+=" moveup fa fa-level-up",b.rows[c].moveup_button.setAttribute("data-i",c),b.rows[c].moveup_button.addEventListener("click",function(a){a.preventDefault();
a.stopPropagation();a=1*this.getAttribute("data-i");if(!(0>=a)){var c=b.getValue(),d=c[a-1];c[a-1]=c[a];c[a]=d;b.setValue(c);b.onChange(!0)}}),d.appendChild(b.rows[c].moveup_button));this.hide_move_buttons||(b.rows[c].movedown_button=this.getButton("","movedown",this.translate("button_move_down_title")),b.rows[c].movedown_button.className+=" movedown fa fa-level-down",b.rows[c].movedown_button.setAttribute("data-i",c),b.rows[c].movedown_button.addEventListener("click",function(a){a.preventDefault();
a.stopPropagation();a=1*this.getAttribute("data-i");var c=b.getValue();if(!(a>=c.length-1)){var d=c[a+1];c[a+1]=c[a];c[a]=d;b.setValue(c);b.onChange(!0)}}),d.appendChild(b.rows[c].movedown_button));a&&b.rows[c].setValue(a)},addControls:function(){var a=this;this.collapsed=!1;this.toggle_button=this.getButton("","collapse",this.translate("button_collapse"));this.title_controls&&(this.title_controls.appendChild(this.toggle_button),this.toggle_button.addEventListener("click",function(b){b.preventDefault();
b.stopPropagation();a.collapsed?(a.collapsed=!1,a.panel.style.display="",a.setButtonText(this,"","collapse",a.translate("button_collapse"))):(a.collapsed=!0,a.panel.style.display="none",a.setButtonText(this,"","expand",a.translate("button_expand")))}),this.options.collapsed&&r(this.toggle_button,"click"),this.schema.options&&"undefined"!=typeof this.schema.options.disable_collapse?this.schema.options.disable_collapse&&(this.toggle_button.style.display="none"):this.jsoneditor.options.disable_collapse&&
(this.toggle_button.style.display="none"));this.add_row_button=this.getButton(this.getItemTitle(),"add",this.translate("button_add_row_title",[this.getItemTitle()]));this.add_row_button.addEventListener("click",function(b){b.preventDefault();b.stopPropagation();a.addRow();a.refreshValue();a.refreshRowButtons();a.onChange(!0)});a.controls.appendChild(this.add_row_button);this.delete_last_row_button=this.getButton(this.translate("button_delete_last",[this.getItemTitle()]),"delete",this.translate("button_delete_last_title",
[this.getItemTitle()]));this.delete_last_row_button.addEventListener("click",function(b){b.preventDefault();b.stopPropagation();b=a.getValue();b.pop();a.setValue(b);a.onChange(!0)});a.controls.appendChild(this.delete_last_row_button);this.remove_all_rows_button=this.getButton(this.translate("button_delete_all"),"delete",this.translate("button_delete_all_title"));this.remove_all_rows_button.addEventListener("click",function(b){b.preventDefault();b.stopPropagation();a.setValue([]);a.onChange(!0)});
a.controls.appendChild(this.remove_all_rows_button)}});f.defaults.editors.multiple=f.AbstractEditor.extend({register:function(){if(this.editors){for(var a=0;a<this.editors.length;a++)this.editors[a]&&this.editors[a].unregister();this.editors[this.type]&&this.editors[this.type].register()}this._super()},unregister:function(){if(this._super(),this.editors)for(var a=0;a<this.editors.length;a++)this.editors[a]&&this.editors[a].unregister()},getNumColumns:function(){return this.editors[this.type]?Math.max(this.editors[this.type].getNumColumns(),
4):4},enable:function(){if(this.editors)for(var a=0;a<this.editors.length;a++)this.editors[a]&&this.editors[a].enable();this.switcher.disabled=!1;this._super()},disable:function(){if(this.editors)for(var a=0;a<this.editors.length;a++)this.editors[a]&&this.editors[a].disable();this.switcher.disabled=!0;this._super()},switchEditor:function(a){var b=this;this.editors[a]||this.buildChildEditor(a);var c=b.getValue();b.type=a;b.register();k(b.editors,function(a,e){e&&(b.type===a?(b.keep_values&&e.setValue(c,
!0),e.container.style.display=""):e.container.style.display="none")});b.refreshValue();b.refreshHeaderText()},buildChildEditor:function(a){var b=this,c=this.types[a],d=b.theme.getChildEditorHolder();b.editor_holder.appendChild(d);var e;"string"==typeof c?(e=l({},b.schema),e.type=c):(e=l({},b.schema,c),e=b.jsoneditor.expandRefs(e),c.required&&Array.isArray(c.required)&&b.schema.required&&Array.isArray(b.schema.required)&&(e.required=b.schema.required.concat(c.required)));c=b.jsoneditor.getEditorClass(e);
b.editors[a]=b.jsoneditor.createEditor(c,{jsoneditor:b.jsoneditor,schema:e,container:d,path:b.path,parent:b,required:!0});b.editors[a].preBuild();b.editors[a].build();b.editors[a].postBuild();b.editors[a].header&&(b.editors[a].header.style.display="none");b.editors[a].option=b.switcher_options[a];d.addEventListener("change_header_text",function(){b.refreshHeaderText()});a!==b.type&&(d.style.display="none")},preBuild:function(){if(this.types=[],this.type=0,this.editors=[],this.validators=[],this.keep_values=
!0,"undefined"!=typeof this.jsoneditor.options.keep_oneof_values&&(this.keep_values=this.jsoneditor.options.keep_oneof_values),"undefined"!=typeof this.options.keep_oneof_values&&(this.keep_values=this.options.keep_oneof_values),this.schema.oneOf)this.oneOf=!0,this.types=this.schema.oneOf,delete this.schema.oneOf;else if(this.schema.anyOf)this.anyOf=!0,this.types=this.schema.anyOf,delete this.schema.anyOf;else{if(this.schema.type&&"any"!==this.schema.type)Array.isArray(this.schema.type)?this.types=
this.schema.type:this.types=[this.schema.type];else if(this.types="string number integer boolean object array null".split(" "),this.schema.disallow){var a=this.schema.disallow;"object"==typeof a&&Array.isArray(a)||(a=[a]);var b=[];k(this.types,function(c,d){-1===a.indexOf(d)&&b.push(d)});this.types=b}delete this.schema.type}this.display_text=this.getDisplayText(this.types)},build:function(){var a=this,b=this.container;this.header=this.label=this.theme.getFormInputLabel(this.getTitle());this.container.appendChild(this.header);
this.switcher=this.theme.getSwitcher(this.display_text);b.appendChild(this.switcher);this.switcher.addEventListener("change",function(b){b.preventDefault();b.stopPropagation();a.switchEditor(a.display_text.indexOf(this.value));a.onChange(!0)});this.editor_holder=document.createElement("div");b.appendChild(this.editor_holder);var c={};a.jsoneditor.options.custom_validators&&(c.custom_validators=a.jsoneditor.options.custom_validators);this.switcher_options=this.theme.getSwitcherOptions(this.switcher);
k(this.types,function(b,e){a.editors[b]=!1;var d;"string"==typeof e?(d=l({},a.schema),d.type=e):(d=l({},a.schema,e),e.required&&Array.isArray(e.required)&&a.schema.required&&Array.isArray(a.schema.required)&&(d.required=a.schema.required.concat(e.required)));a.validators[b]=new f.Validator(a.jsoneditor,d,c)});this.switchEditor(0)},onChildEditorChange:function(a){this.editors[this.type]&&(this.refreshValue(),this.refreshHeaderText());this._super()},refreshHeaderText:function(){var a=this.getDisplayText(this.types);
k(this.switcher_options,function(b,c){c.textContent=a[b]})},refreshValue:function(){this.value=this.editors[this.type].getValue()},setValue:function(a,b){var c=this;k(this.validators,function(b,e){if(!e.validate(a).length)return c.type=b,c.switcher.value=c.display_text[b],!1});this.switchEditor(this.type);this.editors[this.type].setValue(a,b);this.refreshValue();c.onChange()},destroy:function(){k(this.editors,function(a,b){b&&b.destroy()});this.editor_holder&&this.editor_holder.parentNode&&this.editor_holder.parentNode.removeChild(this.editor_holder);
this.switcher&&this.switcher.parentNode&&this.switcher.parentNode.removeChild(this.switcher);this._super()},showValidationErrors:function(a){var b=this;if(this.oneOf||this.anyOf){var c=this.oneOf?"oneOf":"anyOf";k(this.editors,function(d,e){if(e){var g=b.path+"."+c+"["+d+"]",f=[];k(a,function(a,c){if(c.path.substr(0,g.length)===g){var d=l({},c);d.path=b.path+d.path.substr(g.length);f.push(d)}});e.showValidationErrors(f)}})}else k(this.editors,function(b,c){c&&c.showValidationErrors(a)})}});f.defaults.editors["enum"]=
f.AbstractEditor.extend({getNumColumns:function(){return 4},build:function(){this.container;this.title=this.header=this.label=this.theme.getFormInputLabel(this.getTitle());this.container.appendChild(this.title);this.options.enum_titles=this.options.enum_titles||[];this["enum"]=this.schema["enum"];this.selected=0;this.select_options=[];this.html_values=[];for(var a=this,b=0;b<this["enum"].length;b++)this.select_options[b]=this.options.enum_titles[b]||"Value "+(b+1),this.html_values[b]=this.getHTML(this["enum"][b]);
this.switcher=this.theme.getSwitcher(this.select_options);this.container.appendChild(this.switcher);this.display_area=this.theme.getIndentedPanel();this.container.appendChild(this.display_area);this.options.hide_display&&(this.display_area.style.display="none");this.switcher.addEventListener("change",function(){a.selected=a.select_options.indexOf(this.value);a.value=a["enum"][a.selected];a.refreshValue();a.onChange(!0)});this.value=this["enum"][0];this.refreshValue();1===this["enum"].length&&(this.switcher.style.display=
"none")},refreshValue:function(){var a=this;a.selected=-1;var b=JSON.stringify(this.value);return k(this["enum"],function(c,d){if(b===JSON.stringify(d))return a.selected=c,!1}),0>a.selected?void a.setValue(a["enum"][0]):(this.switcher.value=this.select_options[this.selected],void(this.display_area.innerHTML=this.html_values[this.selected]))},enable:function(){this.always_disabled||(this.switcher.disabled=!1);this._super()},disable:function(){this.switcher.disabled=!0;this._super()},getHTML:function(a){var b=
this;if(null===a)return"<em>null</em>";if("object"==typeof a){var c="";return k(a,function(d,e){var g=b.getHTML(e);Array.isArray(a)||(g="<div><em>"+d+"</em>: "+g+"</div>");c+="<li>"+g+"</li>"}),c=Array.isArray(a)?"<ol>"+c+"</ol>":"<ul style='margin-top:0;margin-bottom:0;padding-top:0;padding-bottom:0;'>"+c+"</ul>"}return"boolean"==typeof a?a?"true":"false":"string"==typeof a?a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):a},setValue:function(a){this.value!==a&&(this.value=a,this.refreshValue(),
this.onChange())},destroy:function(){this.display_area&&this.display_area.parentNode&&this.display_area.parentNode.removeChild(this.display_area);this.title&&this.title.parentNode&&this.title.parentNode.removeChild(this.title);this.switcher&&this.switcher.parentNode&&this.switcher.parentNode.removeChild(this.switcher);this._super()}});f.defaults.editors.select=f.AbstractEditor.extend({setValue:function(a,b){var c=a=this.typecast(a||"");0>this.enum_values.indexOf(c)&&(c=this.enum_values[0]);this.value!==
c&&(this.input.value=this.enum_options[this.enum_values.indexOf(c)],this.select2&&this.select2.select2("val",this.input.value),this.value=c,this.onChange())},register:function(){this._super();this.input&&this.input.setAttribute("name",this.formname)},unregister:function(){this._super();this.input&&this.input.removeAttribute("name")},getNumColumns:function(){if(!this.enum_options)return 3;for(var a=this.getTitle().length,b=0;b<this.enum_options.length;b++)a=Math.max(a,this.enum_options[b].length+4);
return Math.min(12,Math.max(a/7,2))},typecast:function(a){return"boolean"===this.schema.type?!!a:"number"===this.schema.type?1*a:"integer"===this.schema.type?Math.floor(1*a):""+a},getValue:function(){return this.value},preBuild:function(){var a=this;this.input_type="select";this.enum_options=[];this.enum_values=[];this.enum_display=[];var b;if(this.schema["enum"]){var c=this.schema.options&&this.schema.options.enum_titles||[];k(this.schema["enum"],function(b,e){a.enum_options[b]=""+e;a.enum_display[b]=
""+(c[b]||e);a.enum_values[b]=a.typecast(e)});this.isRequired()||(a.enum_display.unshift(" "),a.enum_options.unshift("undefined"),a.enum_values.unshift(void 0))}else if("boolean"===this.schema.type)a.enum_display=this.schema.options&&this.schema.options.enum_titles||["true","false"],a.enum_options=["1",""],a.enum_values=[!0,!1],this.isRequired()||(a.enum_display.unshift(" "),a.enum_options.unshift("undefined"),a.enum_values.unshift(void 0));else{if(!this.schema.enumSource)throw"'select' editor requires the enum property to be set.";
if(this.enumSource=[],this.enum_display=[],this.enum_options=[],this.enum_values=[],Array.isArray(this.schema.enumSource))for(b=0;b<this.schema.enumSource.length;b++)"string"==typeof this.schema.enumSource[b]?this.enumSource[b]={source:this.schema.enumSource[b]}:Array.isArray(this.schema.enumSource[b])?this.enumSource[b]=this.schema.enumSource[b]:this.enumSource[b]=l({},this.schema.enumSource[b]);else this.schema.enumValue?this.enumSource=[{source:this.schema.enumSource,value:this.schema.enumValue}]:
this.enumSource=[{source:this.schema.enumSource}];for(b=0;b<this.enumSource.length;b++)this.enumSource[b].value&&(this.enumSource[b].value=this.jsoneditor.compileTemplate(this.enumSource[b].value,this.template_engine)),this.enumSource[b].title&&(this.enumSource[b].title=this.jsoneditor.compileTemplate(this.enumSource[b].title,this.template_engine)),this.enumSource[b].filter&&(this.enumSource[b].filter=this.jsoneditor.compileTemplate(this.enumSource[b].filter,this.template_engine))}},build:function(){var a=
this;this.options.compact||(this.header=this.label=this.theme.getFormInputLabel(this.getTitle()));this.schema.description&&(this.description=this.theme.getFormInputDescription(this.schema.description));this.options.compact&&(this.container.className+=" compact");this.input=this.theme.getSelectInput(this.enum_options);this.theme.setSelectOptions(this.input,this.enum_options,this.enum_display);(this.schema.readOnly||this.schema.readonly)&&(this.always_disabled=!0,this.input.disabled=!0);this.input.addEventListener("change",
function(b){b.preventDefault();b.stopPropagation();a.onInputChange()});this.control=this.theme.getFormControl(this.label,this.input,this.description);this.container.appendChild(this.control);this.value=this.enum_values[0]},onInputChange:function(){var a;a=this.input.value;a=-1===this.enum_options.indexOf(a)?this.enum_values[0]:this.enum_values[this.enum_options.indexOf(a)];a!==this.value&&(this.value=a,this.onChange(!0))},setupSelect2:function(){if(window.jQuery&&window.jQuery.fn&&window.jQuery.fn.select2&&
(2<this.enum_options.length||this.enum_options.length&&this.enumSource)){var a=l({},f.plugins.select2);this.schema.options&&this.schema.options.select2_options&&(a=l(a,this.schema.options.select2_options));this.select2=window.jQuery(this.input).select2(a);var b=this;this.select2.on("select2-blur",function(){b.input.value=b.select2.select2("val");b.onInputChange()});this.select2.on("change",function(){b.input.value=b.select2.select2("val");b.onInputChange()})}else this.select2=null},postBuild:function(){this._super();
this.theme.afterInputReady(this.input);this.setupSelect2()},onWatchedFieldChange:function(){var a,b;if(this.enumSource){a=this.getWatchedFieldValues();for(var c=[],d=[],e=0;e<this.enumSource.length;e++)if(Array.isArray(this.enumSource[e]))c=c.concat(this.enumSource[e]),d=d.concat(this.enumSource[e]);else{var g;if(g=Array.isArray(this.enumSource[e].source)?this.enumSource[e].source:a[this.enumSource[e].source]){if(this.enumSource[e].slice&&(g=Array.prototype.slice.apply(g,this.enumSource[e].slice)),
this.enumSource[e].filter){var f=[];for(b=0;b<g.length;b++)this.enumSource[e].filter({i:b,item:g[b],watched:a})&&f.push(g[b]);g=f}var f=[],h=[];for(b=0;b<g.length;b++){var k=g[b];this.enumSource[e].value?h[b]=this.enumSource[e].value({i:b,item:k}):h[b]=g[b];this.enumSource[e].title?f[b]=this.enumSource[e].title({i:b,item:k}):f[b]=h[b]}c=c.concat(h);d=d.concat(f)}}a=this.value;this.theme.setSelectOptions(this.input,c,d);this.enum_options=c;this.enum_display=d;this.enum_values=c;this.select2&&this.select2.select2("destroy");
-1!==c.indexOf(a)?(this.input.value=a,this.value=a):(this.input.value=c[0],this.value=c[0]||"",this.parent?this.parent.onChildEditorChange(this):this.jsoneditor.onChange(),this.jsoneditor.notifyWatchers(this.path));this.setupSelect2()}this._super()},enable:function(){this.always_disabled||(this.input.disabled=!1,this.select2&&this.select2.select2("enable",!0));this._super()},disable:function(){this.input.disabled=!0;this.select2&&this.select2.select2("enable",!1);this._super()},destroy:function(){this.label&&
this.label.parentNode&&this.label.parentNode.removeChild(this.label);this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description);this.input&&this.input.parentNode&&this.input.parentNode.removeChild(this.input);this.select2&&(this.select2.select2("destroy"),this.select2=null);this._super()}});f.defaults.editors.selectize=f.AbstractEditor.extend({setValue:function(a,b){var c=a=this.typecast(a||"");0>this.enum_values.indexOf(c)&&(c=this.enum_values[0]);this.value!==
c&&(this.input.value=this.enum_options[this.enum_values.indexOf(c)],this.selectize&&this.selectize[0].selectize.addItem(c),this.value=c,this.onChange())},register:function(){this._super();this.input&&this.input.setAttribute("name",this.formname)},unregister:function(){this._super();this.input&&this.input.removeAttribute("name")},getNumColumns:function(){if(!this.enum_options)return 3;for(var a=this.getTitle().length,b=0;b<this.enum_options.length;b++)a=Math.max(a,this.enum_options[b].length+4);return Math.min(12,
Math.max(a/7,2))},typecast:function(a){return"boolean"===this.schema.type?!!a:"number"===this.schema.type?1*a:"integer"===this.schema.type?Math.floor(1*a):""+a},getValue:function(){return this.value},preBuild:function(){var a=this;this.input_type="select";this.enum_options=[];this.enum_values=[];this.enum_display=[];var b;if(this.schema["enum"]){var c=this.schema.options&&this.schema.options.enum_titles||[];k(this.schema["enum"],function(b,e){a.enum_options[b]=""+e;a.enum_display[b]=""+(c[b]||e);
a.enum_values[b]=a.typecast(e)})}else if("boolean"===this.schema.type)a.enum_display=this.schema.options&&this.schema.options.enum_titles||["true","false"],a.enum_options=["1","0"],a.enum_values=[!0,!1];else{if(!this.schema.enumSource)throw"'select' editor requires the enum property to be set.";if(this.enumSource=[],this.enum_display=[],this.enum_options=[],this.enum_values=[],Array.isArray(this.schema.enumSource))for(b=0;b<this.schema.enumSource.length;b++)"string"==typeof this.schema.enumSource[b]?
this.enumSource[b]={source:this.schema.enumSource[b]}:Array.isArray(this.schema.enumSource[b])?this.enumSource[b]=this.schema.enumSource[b]:this.enumSource[b]=l({},this.schema.enumSource[b]);else this.schema.enumValue?this.enumSource=[{source:this.schema.enumSource,value:this.schema.enumValue}]:this.enumSource=[{source:this.schema.enumSource}];for(b=0;b<this.enumSource.length;b++)this.enumSource[b].value&&(this.enumSource[b].value=this.jsoneditor.compileTemplate(this.enumSource[b].value,this.template_engine)),
this.enumSource[b].title&&(this.enumSource[b].title=this.jsoneditor.compileTemplate(this.enumSource[b].title,this.template_engine)),this.enumSource[b].filter&&(this.enumSource[b].filter=this.jsoneditor.compileTemplate(this.enumSource[b].filter,this.template_engine))}},build:function(){var a=this;this.options.compact||(this.header=this.label=this.theme.getFormInputLabel(this.getTitle()));this.schema.description&&(this.description=this.theme.getFormInputDescription(this.schema.description));this.options.compact&&
(this.container.className+=" compact");this.input=this.theme.getSelectInput(this.enum_options);this.theme.setSelectOptions(this.input,this.enum_options,this.enum_display);(this.schema.readOnly||this.schema.readonly)&&(this.always_disabled=!0,this.input.disabled=!0);this.input.addEventListener("change",function(b){b.preventDefault();b.stopPropagation();a.onInputChange()});this.control=this.theme.getFormControl(this.label,this.input,this.description);this.container.appendChild(this.control);this.value=
this.enum_values[0]},onInputChange:function(){var a=this.input.value;this.enum_options.indexOf(a);this.value=this.enum_values[this.enum_options.indexOf(a)];this.onChange(!0)},setupSelectize:function(){var a=this;if(window.jQuery&&window.jQuery.fn&&window.jQuery.fn.selectize&&(2<=this.enum_options.length||this.enum_options.length&&this.enumSource)){var b=l({},f.plugins.selectize);this.schema.options&&this.schema.options.selectize_options&&(b=l(b,this.schema.options.selectize_options));this.selectize=
window.jQuery(this.input).selectize(l(b,{create:!0,onChange:function(){a.onInputChange()}}))}else this.selectize=null},postBuild:function(){this._super();this.theme.afterInputReady(this.input);this.setupSelectize()},onWatchedFieldChange:function(){var a,b;if(this.enumSource){a=this.getWatchedFieldValues();for(var c=[],d=[],e=0;e<this.enumSource.length;e++)if(Array.isArray(this.enumSource[e]))c=c.concat(this.enumSource[e]),d=d.concat(this.enumSource[e]);else if(a[this.enumSource[e].source]){var g=
a[this.enumSource[e].source];if(this.enumSource[e].slice&&(g=Array.prototype.slice.apply(g,this.enumSource[e].slice)),this.enumSource[e].filter){var f=[];for(b=0;b<g.length;b++)this.enumSource[e].filter({i:b,item:g[b]})&&f.push(g[b]);g=f}var f=[],h=[];for(b=0;b<g.length;b++){var k=g[b];this.enumSource[e].value?h[b]=this.enumSource[e].value({i:b,item:k}):h[b]=g[b];this.enumSource[e].title?f[b]=this.enumSource[e].title({i:b,item:k}):f[b]=h[b]}c=c.concat(h);d=d.concat(f)}a=this.value;this.theme.setSelectOptions(this.input,
c,d);this.enum_options=c;this.enum_display=d;this.enum_values=c;-1!==c.indexOf(a)?(this.input.value=a,this.value=a):(this.input.value=c[0],this.value=c[0]||"",this.parent?this.parent.onChildEditorChange(this):this.jsoneditor.onChange(),this.jsoneditor.notifyWatchers(this.path));this.selectize?this.updateSelectizeOptions(c):this.setupSelectize();this._super()}},updateSelectizeOptions:function(a){var b=this.selectize[0].selectize,c=this;b.off();b.clearOptions();for(var d in a)b.addOption({value:a[d],
text:a[d]});b.addItem(this.value);b.on("change",function(){c.onInputChange()})},enable:function(){this.always_disabled||(this.input.disabled=!1,this.selectize&&this.selectize[0].selectize.unlock());this._super()},disable:function(){this.input.disabled=!0;this.selectize&&this.selectize[0].selectize.lock();this._super()},destroy:function(){this.label&&this.label.parentNode&&this.label.parentNode.removeChild(this.label);this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description);
this.input&&this.input.parentNode&&this.input.parentNode.removeChild(this.input);this.selectize&&(this.selectize[0].selectize.destroy(),this.selectize=null);this._super()}});f.defaults.editors.multiselect=f.AbstractEditor.extend({preBuild:function(){this._super();var a;this.select_options={};this.select_values={};a=this.jsoneditor.expandRefs(this.schema.items||{});var b=a["enum"]||[],c=a.options?a.options.enum_titles||[]:[];this.option_keys=[];this.option_titles=[];for(a=0;a<b.length;a++)this.sanitize(b[a])===
b[a]&&(this.option_keys.push(b[a]+""),this.option_titles.push((c[a]||b[a])+""),this.select_values[b[a]+""]=b[a])},build:function(){var a,b=this;if(this.options.compact||(this.header=this.label=this.theme.getFormInputLabel(this.getTitle())),this.schema.description&&(this.description=this.theme.getFormInputDescription(this.schema.description)),!this.schema.format&&8>this.option_keys.length||"checkbox"===this.schema.format){this.input_type="checkboxes";this.inputs={};this.controls={};for(a=0;a<this.option_keys.length;a++){this.inputs[this.option_keys[a]]=
this.theme.getCheckbox();this.select_options[this.option_keys[a]]=this.inputs[this.option_keys[a]];var c=this.theme.getCheckboxLabel(this.option_titles[a]);this.controls[this.option_keys[a]]=this.theme.getFormControl(c,this.inputs[this.option_keys[a]])}this.control=this.theme.getMultiCheckboxHolder(this.controls,this.label,this.description)}else{this.input_type="select";this.input=this.theme.getSelectInput(this.option_keys);this.theme.setSelectOptions(this.input,this.option_keys,this.option_titles);
this.input.multiple=!0;this.input.size=Math.min(10,this.option_keys.length);for(a=0;a<this.option_keys.length;a++)this.select_options[this.option_keys[a]]=this.input.children[a];(this.schema.readOnly||this.schema.readonly)&&(this.always_disabled=!0,this.input.disabled=!0);this.control=this.theme.getFormControl(this.label,this.input,this.description)}this.container.appendChild(this.control);this.control.addEventListener("change",function(c){c.preventDefault();c.stopPropagation();c=[];for(a=0;a<b.option_keys.length;a++)(b.select_options[b.option_keys[a]].selected||
b.select_options[b.option_keys[a]].checked)&&c.push(b.select_values[b.option_keys[a]]);b.updateValue(c);b.onChange(!0)})},setValue:function(a,b){var c;a=a||[];"object"!=typeof a?a=[a]:Array.isArray(a)||(a=[]);for(c=0;c<a.length;c++)"string"!=typeof a[c]&&(a[c]+="");for(c in this.select_options)this.select_options.hasOwnProperty(c)&&(this.select_options[c]["select"===this.input_type?"selected":"checked"]=-1!==a.indexOf(c));this.updateValue(a);this.onChange()},setupSelect2:function(){if(window.jQuery&&
window.jQuery.fn&&window.jQuery.fn.select2){var a=window.jQuery.extend({},f.plugins.select2);this.schema.options&&this.schema.options.select2_options&&(a=l(a,this.schema.options.select2_options));this.select2=window.jQuery(this.input).select2(a);var b=this;this.select2.on("select2-blur",function(){var a=b.select2.select2("val");b.value=a;b.onChange(!0)})}else this.select2=null},onInputChange:function(){this.value=this.input.value;this.onChange(!0)},postBuild:function(){this._super();this.setupSelect2()},
register:function(){this._super();this.input&&this.input.setAttribute("name",this.formname)},unregister:function(){this._super();this.input&&this.input.removeAttribute("name")},getNumColumns:function(){var a=this.getTitle().length,b;for(b in this.select_values)this.select_values.hasOwnProperty(b)&&(a=Math.max(a,(this.select_values[b]+"").length+4));return Math.min(12,Math.max(a/7,2))},updateValue:function(a){for(var b=!1,c=[],d=0;d<a.length;d++)if(this.select_options[a[d]+""]){var e=this.sanitize(this.select_values[a[d]]);
c.push(e);e!==a[d]&&(b=!0)}else b=!0;return this.value=c,this.select2&&this.select2.select2("val",this.value),b},sanitize:function(a){return"number"===this.schema.items.type?1*a:"integer"===this.schema.items.type?Math.floor(1*a):""+a},enable:function(){if(!this.always_disabled){if(this.input)this.input.disabled=!1;else if(this.inputs)for(var a in this.inputs)this.inputs.hasOwnProperty(a)&&(this.inputs[a].disabled=!1);this.select2&&this.select2.select2("enable",!0)}this._super()},disable:function(){if(this.input)this.input.disabled=
!0;else if(this.inputs)for(var a in this.inputs)this.inputs.hasOwnProperty(a)&&(this.inputs[a].disabled=!0);this.select2&&this.select2.select2("enable",!1);this._super()},destroy:function(){this.select2&&(this.select2.select2("destroy"),this.select2=null);this._super()}});f.defaults.editors.base64=f.AbstractEditor.extend({getNumColumns:function(){return 4},build:function(){var a=this;if(this.title=this.header=this.label=this.theme.getFormInputLabel(this.getTitle()),this.input=this.theme.getFormInputField("hidden"),
this.container.appendChild(this.input),!this.schema.readOnly&&!this.schema.readonly){if(!window.FileReader)throw"FileReader required for base64 editor";this.uploader=this.theme.getFormInputField("file");this.uploader.addEventListener("change",function(b){if(b.preventDefault(),b.stopPropagation(),this.files&&this.files.length){var c=new FileReader;c.onload=function(b){a.value=b.target.result;a.refreshPreview();a.onChange(!0);c=null};c.readAsDataURL(this.files[0])}})}this.preview=this.theme.getFormInputDescription(this.schema.description);
this.container.appendChild(this.preview);this.control=this.theme.getFormControl(this.label,this.uploader||this.input,this.preview);this.container.appendChild(this.control)},refreshPreview:function(){if(this.last_preview!==this.value&&(this.last_preview=this.value,this.preview.innerHTML="",this.value)){var a=this.value.match(/^data:([^;,]+)[;,]/);if(a&&(a=a[1]),a){if(this.preview.innerHTML="<strong>Type:</strong> "+a+", <strong>Size:</strong> "+Math.floor((this.value.length-this.value.split(",")[0].length-
1)/1.33333)+" bytes","image"===a.substr(0,5))this.preview.innerHTML+="<br>",a=document.createElement("img"),a.style.maxWidth="100%",a.style.maxHeight="100px",a.src=this.value,this.preview.appendChild(a)}else this.preview.innerHTML="<em>Invalid data URI</em>"}},enable:function(){this.uploader&&(this.uploader.disabled=!1);this._super()},disable:function(){this.uploader&&(this.uploader.disabled=!0);this._super()},setValue:function(a){this.value!==a&&(this.value=a,this.input.value=this.value,this.refreshPreview(),
this.onChange())},destroy:function(){this.preview&&this.preview.parentNode&&this.preview.parentNode.removeChild(this.preview);this.title&&this.title.parentNode&&this.title.parentNode.removeChild(this.title);this.input&&this.input.parentNode&&this.input.parentNode.removeChild(this.input);this.uploader&&this.uploader.parentNode&&this.uploader.parentNode.removeChild(this.uploader);this._super()}});f.defaults.editors.upload=f.AbstractEditor.extend({getNumColumns:function(){return 4},build:function(){var a=
this;if(this.title=this.header=this.label=this.theme.getFormInputLabel(this.getTitle()),this.input=this.theme.getFormInputField("hidden"),this.container.appendChild(this.input),!this.schema.readOnly&&!this.schema.readonly){if(!this.jsoneditor.options.upload)throw"Upload handler required for upload editor";this.uploader=this.theme.getFormInputField("file");this.uploader.addEventListener("change",function(b){if(b.preventDefault(),b.stopPropagation(),this.files&&this.files.length){var c=new FileReader;
c.onload=function(b){a.preview_value=b.target.result;a.refreshPreview();a.onChange(!0);c=null};c.readAsDataURL(this.files[0])}})}var b=this.schema.description;b||(b="");this.preview=this.theme.getFormInputDescription(b);this.container.appendChild(this.preview);this.control=this.theme.getFormControl(this.label,this.uploader||this.input,this.preview);this.container.appendChild(this.control)},refreshPreview:function(){if(this.last_preview!==this.preview_value&&(this.last_preview=this.preview_value,this.preview.innerHTML=
"",this.preview_value)){var a=this,b=this.preview_value.match(/^data:([^;,]+)[;,]/);b&&(b=b[1]);b||(b="unknown");var c=this.uploader.files[0];if(this.preview.innerHTML="<strong>Type:</strong> "+b+", <strong>Size:</strong> "+c.size+" bytes","image"===b.substr(0,5))this.preview.innerHTML+="<br>",b=document.createElement("img"),b.style.maxWidth="100%",b.style.maxHeight="100px",b.src=this.preview_value,this.preview.appendChild(b);this.preview.innerHTML+="<br>";var d=this.getButton("Upload","upload","Upload");
this.preview.appendChild(d);d.addEventListener("click",function(b){b.preventDefault();d.setAttribute("disabled","disabled");a.theme.removeInputError(a.uploader);a.theme.getProgressBar&&(a.progressBar=a.theme.getProgressBar(),a.preview.appendChild(a.progressBar));a.jsoneditor.options.upload(a.path,c,{success:function(b){a.setValue(b);a.parent?a.parent.onChildEditorChange(a):a.jsoneditor.onChange();a.progressBar&&a.preview.removeChild(a.progressBar);d.removeAttribute("disabled")},failure:function(b){a.theme.addInputError(a.uploader,
b);a.progressBar&&a.preview.removeChild(a.progressBar);d.removeAttribute("disabled")},updateProgress:function(b){a.progressBar&&(b?a.theme.updateProgressBar(a.progressBar,b):a.theme.updateProgressBarUnknown(a.progressBar))}})})}},enable:function(){this.uploader&&(this.uploader.disabled=!1);this._super()},disable:function(){this.uploader&&(this.uploader.disabled=!0);this._super()},setValue:function(a){this.value!==a&&(this.value=a,this.input.value=this.value,this.onChange())},destroy:function(){this.preview&&
this.preview.parentNode&&this.preview.parentNode.removeChild(this.preview);this.title&&this.title.parentNode&&this.title.parentNode.removeChild(this.title);this.input&&this.input.parentNode&&this.input.parentNode.removeChild(this.input);this.uploader&&this.uploader.parentNode&&this.uploader.parentNode.removeChild(this.uploader);this._super()}});f.defaults.editors.checkbox=f.AbstractEditor.extend({setValue:function(a,b){this.value=!!a;this.input.checked=this.value;this.onChange()},register:function(){this._super();
this.input&&this.input.setAttribute("name",this.formname)},unregister:function(){this._super();this.input&&this.input.removeAttribute("name")},getNumColumns:function(){return Math.min(12,Math.max(this.getTitle().length/7,2))},build:function(){var a=this;this.options.compact||(this.label=this.header=this.theme.getCheckboxLabel(this.getTitle()));this.schema.description&&(this.description=this.theme.getFormInputDescription(this.schema.description));this.options.compact&&(this.container.className+=" compact");
this.input=this.theme.getCheckbox();this.control=this.theme.getFormControl(this.label,this.input,this.description);(this.schema.readOnly||this.schema.readonly)&&(this.always_disabled=!0,this.input.disabled=!0);this.input.addEventListener("change",function(b){b.preventDefault();b.stopPropagation();a.value=this.checked;a.onChange(!0)});this.container.appendChild(this.control)},enable:function(){this.always_disabled||(this.input.disabled=!1);this._super()},disable:function(){this.input.disabled=!0;this._super()},
destroy:function(){this.label&&this.label.parentNode&&this.label.parentNode.removeChild(this.label);this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description);this.input&&this.input.parentNode&&this.input.parentNode.removeChild(this.input);this._super()}});f.defaults.editors.arraySelectize=f.AbstractEditor.extend({build:function(){this.title=this.theme.getFormInputLabel(this.getTitle());this.title_controls=this.theme.getHeaderButtonHolder();this.title.appendChild(this.title_controls);
this.error_holder=document.createElement("div");this.schema.description&&(this.description=this.theme.getDescription(this.schema.description));this.input=document.createElement("select");this.input.setAttribute("multiple","multiple");var a=this.theme.getFormControl(this.title,this.input,this.description);this.container.appendChild(a);this.container.appendChild(this.error_holder);window.jQuery(this.input).selectize({delimiter:!1,createOnBlur:!0,create:!0})},postBuild:function(){var a=this;this.input.selectize.on("change",
function(b){a.refreshValue();a.onChange(!0)})},destroy:function(){this.empty(!0);this.title&&this.title.parentNode&&this.title.parentNode.removeChild(this.title);this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description);this.input&&this.input.parentNode&&this.input.parentNode.removeChild(this.input);this._super()},empty:function(a){},setValue:function(a,b){var c=this;a=a||[];Array.isArray(a)||(a=[a]);this.input.selectize.clearOptions();this.input.selectize.clear(!0);
a.forEach(function(a){c.input.selectize.addOption({text:a,value:a})});this.input.selectize.setValue(a);this.refreshValue(b)},refreshValue:function(a){this.value=this.input.selectize.getValue()},showValidationErrors:function(a){var b=this,c=[],d=[];if(k(a,function(a,f){f.path===b.path?c.push(f):d.push(f)}),this.error_holder)c.length?(this.error_holder.innerHTML="",this.error_holder.style.display="",k(c,function(a,c){b.error_holder.appendChild(b.theme.getErrorMessage(c.message))})):this.error_holder.style.display=
"none"}});var t=function(){var a=document.documentElement;return a.matches?"matches":a.webkitMatchesSelector?"webkitMatchesSelector":a.mozMatchesSelector?"mozMatchesSelector":a.msMatchesSelector?"msMatchesSelector":a.oMatchesSelector?"oMatchesSelector":void 0}();f.AbstractTheme=p.extend({getContainer:function(){return document.createElement("div")},getFloatRightLinkHolder:function(){var a=document.createElement("div");return a.style=a.style||{},a.style.cssFloat="right",a.style.marginLeft="10px",a},
getModal:function(){var a=document.createElement("div");return a.style.backgroundColor="white",a.style.border="1px solid black",a.style.boxShadow="3px 3px black",a.style.position="absolute",a.style.zIndex="10",a.style.display="none",a},getGridContainer:function(){return document.createElement("div")},getGridRow:function(){var a=document.createElement("div");return a.className="row",a},getGridColumn:function(){return document.createElement("div")},setGridColumnSize:function(a,b){},getLink:function(a){var b=
document.createElement("a");return b.setAttribute("href","#"),b.appendChild(document.createTextNode(a)),b},disableHeader:function(a){a.style.color="#ccc"},disableLabel:function(a){a.style.color="#ccc"},enableHeader:function(a){a.style.color=""},enableLabel:function(a){a.style.color=""},getFormInputLabel:function(a){var b=document.createElement("label");return b.appendChild(document.createTextNode(a)),b},getCheckboxLabel:function(a){a=this.getFormInputLabel(a);return a.style.fontWeight="normal",a},
getHeader:function(a){var b=document.createElement("h3");return"string"==typeof a?b.textContent=a:b.appendChild(a),b},getCheckbox:function(){var a=this.getFormInputField("checkbox");return a.style.display="inline-block",a.style.width="auto",a},getMultiCheckboxHolder:function(a,b,c){var d=document.createElement("div");b&&(b.style.display="block",d.appendChild(b));for(var e in a)a.hasOwnProperty(e)&&(a[e].style.display="inline-block",a[e].style.marginRight="20px",d.appendChild(a[e]));return c&&d.appendChild(c),
d},getSelectInput:function(a){var b=document.createElement("select");return a&&this.setSelectOptions(b,a),b},getSwitcher:function(a){a=this.getSelectInput(a);return a.style.backgroundColor="transparent",a.style.display="inline-block",a.style.fontStyle="italic",a.style.fontWeight="normal",a.style.height="auto",a.style.marginBottom=0,a.style.marginLeft="5px",a.style.padding="0 0 0 3px",a.style.width="auto",a},getSwitcherOptions:function(a){return a.getElementsByTagName("option")},setSwitcherOptions:function(a,
b,c){this.setSelectOptions(a,b,c)},setSelectOptions:function(a,b,c){c=c||[];a.innerHTML="";for(var d=0;d<b.length;d++){var e=document.createElement("option");e.setAttribute("value",b[d]);e.textContent=c[d]||b[d];a.appendChild(e)}},getTextareaInput:function(){var a=document.createElement("textarea");return a.style=a.style||{},a.style.width="100%",a.style.height="300px",a.style.boxSizing="border-box",a},getRangeInput:function(a,b,c){var d=this.getFormInputField("range");return d.setAttribute("min",
a),d.setAttribute("max",b),d.setAttribute("step",c),d},getFormInputField:function(a){var b=document.createElement("input");return b.setAttribute("type",a),b},afterInputReady:function(a){},getFormControl:function(a,b,c){var d=document.createElement("div");return d.className="form-control",a&&d.appendChild(a),"checkbox"===b.type?a.insertBefore(b,a.firstChild):d.appendChild(b),c&&d.appendChild(c),d},getIndentedPanel:function(){var a=document.createElement("div");return a.style=a.style||{},a.style.paddingLeft=
"10px",a.style.marginLeft="10px",a.style.borderLeft="1px solid #ccc",a},getChildEditorHolder:function(){return document.createElement("div")},getDescription:function(a){var b=document.createElement("p");return b.innerHTML=a,b},getCheckboxDescription:function(a){return this.getDescription(a)},getFormInputDescription:function(a){return this.getDescription(a)},getHeaderButtonHolder:function(){return this.getButtonHolder()},getButtonHolder:function(){return document.createElement("div")},getButton:function(a,
b,c){var d=document.createElement("button");return d.type="button",this.setButtonText(d,a,b,c),d},setButtonText:function(a,b,c,d){a.innerHTML="";c&&(a.appendChild(c),a.innerHTML+=" ");a.appendChild(document.createTextNode(b));d&&a.setAttribute("title",d)},getTable:function(){return document.createElement("table")},getTableRow:function(){return document.createElement("tr")},getTableHead:function(){return document.createElement("thead")},getTableBody:function(){return document.createElement("tbody")},
getTableHeaderCell:function(a){var b=document.createElement("th");return b.textContent=a,b},getTableCell:function(){return document.createElement("td")},getErrorMessage:function(a){var b=document.createElement("p");return b.style=b.style||{},b.style.color="red",b.appendChild(document.createTextNode(a)),b},addInputError:function(a,b){},removeInputError:function(a){},addTableRowError:function(a){},removeTableRowError:function(a){},getTabHolder:function(){var a=document.createElement("div");return a.innerHTML=
"<div style='float: left; width: 130px;' class='tabs'></div><div class='content' style='margin-left: 130px;'></div><div style='clear:both;'></div>",a},applyStyles:function(a,b){a.style=a.style||{};for(var c in b)b.hasOwnProperty(c)&&(a.style[c]=b[c])},closest:function(a,b){for(;a&&a!==document&&a[t];){if(a[t](b))return a;a=a.parentNode}return!1},getTab:function(a){var b=document.createElement("div");return b.appendChild(a),b.style=b.style||{},this.applyStyles(b,{border:"1px solid #ccc",borderWidth:"1px 0 1px 1px",
textAlign:"center",lineHeight:"30px",borderRadius:"5px",borderBottomRightRadius:0,borderTopRightRadius:0,fontWeight:"bold",cursor:"pointer"}),b},getTabContentHolder:function(a){return a.children[1]},getTabContent:function(){return this.getIndentedPanel()},markTabActive:function(a){this.applyStyles(a,{opacity:1,background:"white"})},markTabInactive:function(a){this.applyStyles(a,{opacity:.5,background:""})},addTab:function(a,b){a.children[0].appendChild(b)},getBlockLink:function(){var a=document.createElement("a");
return a.style.display="block",a},getBlockLinkHolder:function(){return document.createElement("div")},getLinksHolder:function(){return document.createElement("div")},createMediaLink:function(a,b,c){a.appendChild(b);c.style.width="100%";a.appendChild(c)},createImageLink:function(a,b,c){a.appendChild(b);b.appendChild(c)}});f.defaults.themes.bootstrap2=f.AbstractTheme.extend({getRangeInput:function(a,b,c){return this._super(a,b,c)},getGridContainer:function(){var a=document.createElement("div");return a.className=
"container-fluid",a},getGridRow:function(){var a=document.createElement("div");return a.className="row-fluid",a},getFormInputLabel:function(a){a=this._super(a);return a.style.display="inline-block",a.style.fontWeight="bold",a},setGridColumnSize:function(a,b){a.className="span"+b},getSelectInput:function(a){a=this._super(a);return a.style.width="auto",a.style.maxWidth="98%",a},getFormInputField:function(a){a=this._super(a);return a.style.width="98%",a},afterInputReady:function(a){a.controlgroup||(a.controlgroup=
this.closest(a,".control-group"),a.controls=this.closest(a,".controls"),this.closest(a,".compact")&&(a.controlgroup.className=a.controlgroup.className.replace(/control-group/g,"").replace(/[ ]{2,}/g," "),a.controls.className=a.controlgroup.className.replace(/controls/g,"").replace(/[ ]{2,}/g," "),a.style.marginBottom=0))},getIndentedPanel:function(){var a=document.createElement("div");return a.className="well well-small",a.style.paddingBottom=0,a},getFormInputDescription:function(a){var b=document.createElement("p");
return b.className="help-inline",b.textContent=a,b},getFormControl:function(a,b,c){var d=document.createElement("div");d.className="control-group";var e=document.createElement("div");return e.className="controls",a&&"checkbox"===b.getAttribute("type")?(d.appendChild(e),a.className+=" checkbox",a.appendChild(b),e.appendChild(a),e.style.height="30px"):(a&&(a.className+=" control-label",d.appendChild(a)),e.appendChild(b),d.appendChild(e)),c&&e.appendChild(c),d},getHeaderButtonHolder:function(){var a=
this.getButtonHolder();return a.style.marginLeft="10px",a},getButtonHolder:function(){var a=document.createElement("div");return a.className="btn-group",a},getButton:function(a,b,c){a=this._super(a,b,c);return a.className+=" btn btn-default",a},getTable:function(){var a=document.createElement("table");return a.className="table table-bordered",a.style.maxWidth="none",a},addInputError:function(a,b){a.controlgroup&&a.controls&&(a.controlgroup.className+=" error",a.errmsg?a.errmsg.style.display="":(a.errmsg=
document.createElement("p"),a.errmsg.className="help-block errormsg",a.controls.appendChild(a.errmsg)),a.errmsg.textContent=b)},removeInputError:function(a){a.errmsg&&(a.errmsg.style.display="none",a.controlgroup.className=a.controlgroup.className.replace(/\s?error/g,""))},getTabHolder:function(){var a=document.createElement("div");return a.className="tabbable tabs-left",a.innerHTML="<ul class='nav nav-tabs span2' style='margin-right: 0;'></ul><div class='tab-content span10' style='overflow:visible;'></div>",
a},getTab:function(a){var b=document.createElement("li"),c=document.createElement("a");return c.setAttribute("href","#"),c.appendChild(a),b.appendChild(c),b},getTabContentHolder:function(a){return a.children[1]},getTabContent:function(){var a=document.createElement("div");return a.className="tab-pane active",a},markTabActive:function(a){a.className+=" active"},markTabInactive:function(a){a.className=a.className.replace(/\s?active/g,"")},addTab:function(a,b){a.children[0].appendChild(b)},getProgressBar:function(){var a=
document.createElement("div");a.className="progress";var b=document.createElement("div");return b.className="bar",b.style.width="0%",a.appendChild(b),a},updateProgressBar:function(a,b){a&&(a.firstChild.style.width=b+"%")},updateProgressBarUnknown:function(a){a&&(a.className="progress progress-striped active",a.firstChild.style.width="100%")}});f.defaults.themes.bootstrap3=f.AbstractTheme.extend({getSelectInput:function(a){a=this._super(a);return a.className+="form-control",a},setGridColumnSize:function(a,
b){a.className="col-md-"+b},afterInputReady:function(a){a.controlgroup||(a.controlgroup=this.closest(a,".form-group"),this.closest(a,".compact")&&(a.controlgroup.style.marginBottom=0))},getTextareaInput:function(){var a=document.createElement("textarea");return a.className="form-control",a},getRangeInput:function(a,b,c){return this._super(a,b,c)},getFormInputField:function(a){var b=this._super(a);return"checkbox"!==a&&(b.className+="form-control"),b},getFormControl:function(a,b,c){var d=document.createElement("div");
return a&&"checkbox"===b.type?(d.className+=" checkbox",a.appendChild(b),a.style.fontSize="14px",d.style.marginTop="0",d.appendChild(a),b.style.position="relative",b.style.cssFloat="left"):(d.className+=" form-group",a&&(a.className+=" control-label",d.appendChild(a)),d.appendChild(b)),c&&d.appendChild(c),d},getIndentedPanel:function(){var a=document.createElement("div");return a.className="well well-sm",a.style.paddingBottom=0,a},getFormInputDescription:function(a){var b=document.createElement("p");
return b.className="help-block",b.innerHTML=a,b},getHeaderButtonHolder:function(){var a=this.getButtonHolder();return a.style.marginLeft="10px",a},getButtonHolder:function(){var a=document.createElement("div");return a.className="btn-group",a},getButton:function(a,b,c){a=this._super(a,b,c);return a.className+="btn btn-default",a},getTable:function(){var a=document.createElement("table");return a.className="table table-bordered",a.style.maxWidth="none",a},addInputError:function(a,b){a.controlgroup&&
(a.controlgroup.className+=" has-error",a.errmsg?a.errmsg.style.display="":(a.errmsg=document.createElement("p"),a.errmsg.className="help-block errormsg",a.controlgroup.appendChild(a.errmsg)),a.errmsg.textContent=b)},removeInputError:function(a){a.errmsg&&(a.errmsg.style.display="none",a.controlgroup.className=a.controlgroup.className.replace(/\s?has-error/g,""))},getTabHolder:function(){var a=document.createElement("div");return a.innerHTML="<div class='tabs list-group col-md-2'></div><div class='col-md-10'></div>",
a.className="rows",a},getTab:function(a){var b=document.createElement("a");return b.className="list-group-item",b.setAttribute("href","#"),b.appendChild(a),b},markTabActive:function(a){a.className+=" active"},markTabInactive:function(a){a.className=a.className.replace(/\s?active/g,"")},getProgressBar:function(){var a=document.createElement("div");a.className="progress";var b=document.createElement("div");return b.className="progress-bar",b.setAttribute("role","progressbar"),b.setAttribute("aria-valuenow",
0),b.setAttribute("aria-valuemin",0),b.setAttribute("aria-valuenax",100),b.innerHTML="0%",a.appendChild(b),a},updateProgressBar:function(a,b){if(a){var c=a.firstChild,d=b+"%";c.setAttribute("aria-valuenow",b);c.style.width=d;c.innerHTML=d}},updateProgressBarUnknown:function(a){if(a){var b=a.firstChild;a.className="progress progress-striped active";b.removeAttribute("aria-valuenow");b.style.width="100%";b.innerHTML=""}}});f.defaults.themes.foundation=f.AbstractTheme.extend({getChildEditorHolder:function(){var a=
document.createElement("div");return a.style.marginBottom="15px",a},getSelectInput:function(a){a=this._super(a);return a.style.minWidth="none",a.style.padding="5px",a.style.marginTop="3px",a},getSwitcher:function(a){a=this._super(a);return a.style.paddingRight="8px",a},afterInputReady:function(a){this.closest(a,".compact")&&(a.style.marginBottom=0);a.group=this.closest(a,".form-control")},getFormInputLabel:function(a){a=this._super(a);return a.style.display="inline-block",a},getFormInputField:function(a){var b=
this._super(a);return b.style.width="100%",b.style.marginBottom="checkbox"===a?"0":"12px",b},getFormInputDescription:function(a){var b=document.createElement("p");return b.textContent=a,b.style.marginTop="-10px",b.style.fontStyle="italic",b},getIndentedPanel:function(){var a=document.createElement("div");return a.className="panel",a.style.paddingBottom=0,a},getHeaderButtonHolder:function(){var a=this.getButtonHolder();return a.style.display="inline-block",a.style.marginLeft="10px",a.style.verticalAlign=
"middle",a},getButtonHolder:function(){var a=document.createElement("div");return a.className="button-group",a},getButton:function(a,b,c){a=this._super(a,b,c);return a.className+=" small button",a},addInputError:function(a,b){a.group&&(a.group.className+=" error",a.errmsg?a.errmsg.style.display="":(a.insertAdjacentHTML("afterend",'<small class="error"></small>'),a.errmsg=a.parentNode.getElementsByClassName("error")[0]),a.errmsg.textContent=b)},removeInputError:function(a){a.errmsg&&(a.group.className=
a.group.className.replace(/ error/g,""),a.errmsg.style.display="none")},getProgressBar:function(){var a=document.createElement("div");a.className="progress";var b=document.createElement("span");return b.className="meter",b.style.width="0%",a.appendChild(b),a},updateProgressBar:function(a,b){a&&(a.firstChild.style.width=b+"%")},updateProgressBarUnknown:function(a){a&&(a.firstChild.style.width="100%")}});f.defaults.themes.foundation3=f.defaults.themes.foundation.extend({getHeaderButtonHolder:function(){var a=
this._super();return a.style.fontSize=".6em",a},getFormInputLabel:function(a){a=this._super(a);return a.style.fontWeight="bold",a},getTabHolder:function(){var a=document.createElement("div");return a.className="row",a.innerHTML="<dl class='tabs vertical two columns'></dl><div class='tabs-content ten columns'></div>",a},setGridColumnSize:function(a,b){a.className="columns "+"zero one two three four five six seven eight nine ten eleven twelve".split(" ")[b]},getTab:function(a){var b=document.createElement("dd"),
c=document.createElement("a");return c.setAttribute("href","#"),c.appendChild(a),b.appendChild(c),b},getTabContentHolder:function(a){return a.children[1]},getTabContent:function(){var a=document.createElement("div");return a.className="content active",a.style.paddingLeft="5px",a},markTabActive:function(a){a.className+=" active"},markTabInactive:function(a){a.className=a.className.replace(/\s*active/g,"")},addTab:function(a,b){a.children[0].appendChild(b)}});f.defaults.themes.foundation4=f.defaults.themes.foundation.extend({getHeaderButtonHolder:function(){var a=
this._super();return a.style.fontSize=".6em",a},setGridColumnSize:function(a,b){a.className="columns large-"+b},getFormInputDescription:function(a){a=this._super(a);return a.style.fontSize=".8rem",a},getFormInputLabel:function(a){a=this._super(a);return a.style.fontWeight="bold",a}});f.defaults.themes.foundation5=f.defaults.themes.foundation.extend({getFormInputDescription:function(a){a=this._super(a);return a.style.fontSize=".8rem",a},setGridColumnSize:function(a,b){a.className="columns medium-"+
b},getButton:function(a,b,c){a=this._super(a,b,c);return a.className=a.className.replace(/\s*small/g,"")+" tiny",a},getTabHolder:function(){var a=document.createElement("div");return a.innerHTML="<dl class='tabs vertical'></dl><div class='tabs-content vertical'></div>",a},getTab:function(a){var b=document.createElement("dd"),c=document.createElement("a");return c.setAttribute("href","#"),c.appendChild(a),b.appendChild(c),b},getTabContentHolder:function(a){return a.children[1]},getTabContent:function(){var a=
document.createElement("div");return a.className="content active",a.style.paddingLeft="5px",a},markTabActive:function(a){a.className+=" active"},markTabInactive:function(a){a.className=a.className.replace(/\s*active/g,"")},addTab:function(a,b){a.children[0].appendChild(b)}});f.defaults.themes.foundation6=f.defaults.themes.foundation5.extend({getIndentedPanel:function(){var a=document.createElement("div");return a.className="callout secondary",a},getButtonHolder:function(){var a=document.createElement("div");
return a.className="button-group tiny",a.style.marginBottom=0,a},getFormInputLabel:function(a){a=this._super(a);return a.style.display="block",a},getFormControl:function(a,b,c){var d=document.createElement("div");return d.className="form-control",a&&d.appendChild(a),"checkbox"===b.type?a.insertBefore(b,a.firstChild):a?a.appendChild(b):d.appendChild(b),c&&a.appendChild(c),d},addInputError:function(a,b){if(a.group){if(a.group.className+=" error",a.errmsg)a.errmsg.style.display="",a.className="";else{var c=
document.createElement("span");c.className="form-error is-visible";a.group.getElementsByTagName("label")[0].appendChild(c);a.className+=" is-invalid-input";a.errmsg=c}a.errmsg.textContent=b}},removeInputError:function(a){a.errmsg&&(a.className=a.className.replace(/ is-invalid-input/g,""),a.errmsg.parentNode&&a.errmsg.parentNode.removeChild(a.errmsg))}});f.defaults.themes.html=f.AbstractTheme.extend({getFormInputLabel:function(a){a=this._super(a);return a.style.display="block",a.style.marginBottom=
"3px",a.style.fontWeight="bold",a},getFormInputDescription:function(a){a=this._super(a);return a.style.fontSize=".8em",a.style.margin=0,a.style.display="inline-block",a.style.fontStyle="italic",a},getIndentedPanel:function(){var a=this._super();return a.style.border="1px solid #ddd",a.style.padding="5px",a.style.margin="5px",a.style.borderRadius="3px",a},getChildEditorHolder:function(){var a=this._super();return a.style.marginBottom="8px",a},getHeaderButtonHolder:function(){var a=this.getButtonHolder();
return a.style.display="inline-block",a.style.marginLeft="10px",a.style.fontSize=".8em",a.style.verticalAlign="middle",a},getTable:function(){var a=this._super();return a.style.borderBottom="1px solid #ccc",a.style.marginBottom="5px",a},addInputError:function(a,b){if(a.style.borderColor="red",a.errmsg)a.errmsg.style.display="block";else{var c=this.closest(a,".form-control");a.errmsg=document.createElement("div");a.errmsg.setAttribute("class","errmsg");a.errmsg.style=a.errmsg.style||{};a.errmsg.style.color=
"red";c.appendChild(a.errmsg)}a.errmsg.innerHTML="";a.errmsg.appendChild(document.createTextNode(b))},removeInputError:function(a){a.style.borderColor="";a.errmsg&&(a.errmsg.style.display="none")},getProgressBar:function(){var a=document.createElement("progress");return a.setAttribute("max",100),a.setAttribute("value",0),a},updateProgressBar:function(a,b){a&&a.setAttribute("value",b)},updateProgressBarUnknown:function(a){a&&a.removeAttribute("value")}});f.defaults.themes.jqueryui=f.AbstractTheme.extend({getTable:function(){var a=
this._super();return a.setAttribute("cellpadding",5),a.setAttribute("cellspacing",0),a},getTableHeaderCell:function(a){a=this._super(a);return a.className="ui-state-active",a.style.fontWeight="bold",a},getTableCell:function(){var a=this._super();return a.className="ui-widget-content",a},getHeaderButtonHolder:function(){var a=this.getButtonHolder();return a.style.marginLeft="10px",a.style.fontSize=".6em",a.style.display="inline-block",a},getFormInputDescription:function(a){a=this.getDescription(a);
return a.style.marginLeft="10px",a.style.display="inline-block",a},getFormControl:function(a,b,c){a=this._super(a,b,c);return"checkbox"===b.type?(a.style.lineHeight="25px",a.style.padding="3px 0"):a.style.padding="4px 0 8px 0",a},getDescription:function(a){var b=document.createElement("span");return b.style.fontSize=".8em",b.style.fontStyle="italic",b.textContent=a,b},getButtonHolder:function(){var a=document.createElement("div");return a.className="ui-buttonset",a.style.fontSize=".7em",a},getFormInputLabel:function(a){var b=
document.createElement("label");return b.style.fontWeight="bold",b.style.display="block",b.textContent=a,b},getButton:function(a,b,c){var d=document.createElement("button");d.className="ui-button ui-widget ui-state-default ui-corner-all";b&&!a?(d.className+=" ui-button-icon-only",b.className+=" ui-button-icon-primary ui-icon-primary",d.appendChild(b)):b?(d.className+=" ui-button-text-icon-primary",b.className+=" ui-button-icon-primary ui-icon-primary",d.appendChild(b)):d.className+=" ui-button-text-only";
b=document.createElement("span");return b.className="ui-button-text",b.textContent=a||c||".",d.appendChild(b),d.setAttribute("title",c),d},setButtonText:function(a,b,c,d){a.innerHTML="";a.className="ui-button ui-widget ui-state-default ui-corner-all";c&&!b?(a.className+=" ui-button-icon-only",c.className+=" ui-button-icon-primary ui-icon-primary",a.appendChild(c)):c?(a.className+=" ui-button-text-icon-primary",c.className+=" ui-button-icon-primary ui-icon-primary",a.appendChild(c)):a.className+=" ui-button-text-only";
c=document.createElement("span");c.className="ui-button-text";c.textContent=b||d||".";a.appendChild(c);a.setAttribute("title",d)},getIndentedPanel:function(){var a=document.createElement("div");return a.className="ui-widget-content ui-corner-all",a.style.padding="1em 1.4em",a.style.marginBottom="20px",a},afterInputReady:function(a){a.controls||(a.controls=this.closest(a,".form-control"))},addInputError:function(a,b){a.controls&&(a.errmsg?a.errmsg.style.display="":(a.errmsg=document.createElement("div"),
a.errmsg.className="ui-state-error",a.controls.appendChild(a.errmsg)),a.errmsg.textContent=b)},removeInputError:function(a){a.errmsg&&(a.errmsg.style.display="none")},markTabActive:function(a){a.className=a.className.replace(/\s*ui-widget-header/g,"")+" ui-state-active"},markTabInactive:function(a){a.className=a.className.replace(/\s*ui-state-active/g,"")+" ui-widget-header"}});f.defaults.themes.barebones=f.AbstractTheme.extend({getFormInputLabel:function(a){return this._super(a)},getFormInputDescription:function(a){return this._super(a)},
getIndentedPanel:function(){return this._super()},getChildEditorHolder:function(){return this._super()},getHeaderButtonHolder:function(){return this.getButtonHolder()},getTable:function(){return this._super()},addInputError:function(a,b){if(a.errmsg)a.errmsg.style.display="block";else{var c=this.closest(a,".form-control");a.errmsg=document.createElement("div");a.errmsg.setAttribute("class","errmsg");c.appendChild(a.errmsg)}a.errmsg.innerHTML="";a.errmsg.appendChild(document.createTextNode(b))},removeInputError:function(a){a.style.borderColor=
"";a.errmsg&&(a.errmsg.style.display="none")},getProgressBar:function(){var a=document.createElement("progress");return a.setAttribute("max",100),a.setAttribute("value",0),a},updateProgressBar:function(a,b){a&&a.setAttribute("value",b)},updateProgressBarUnknown:function(a){a&&a.removeAttribute("value")}});f.AbstractIconLib=p.extend({mapping:{collapse:"",expand:"","delete":"",edit:"",add:"",cancel:"",save:"",moveup:"",movedown:""},icon_prefix:"",getIconClass:function(a){return this.mapping[a]?this.icon_prefix+
this.mapping[a]:null},getIcon:function(a){a=this.getIconClass(a);if(!a)return null;var b=document.createElement("i");return b.className=a,b}});f.defaults.iconlibs.bootstrap2=f.AbstractIconLib.extend({mapping:{collapse:"chevron-down",expand:"chevron-up","delete":"trash",edit:"pencil",add:"plus",cancel:"ban-circle",save:"ok",moveup:"arrow-up",movedown:"arrow-down"},icon_prefix:"icon-"});f.defaults.iconlibs.bootstrap3=f.AbstractIconLib.extend({mapping:{collapse:"chevron-down",expand:"chevron-right",
"delete":"remove",edit:"pencil",add:"plus",cancel:"floppy-remove",save:"floppy-saved",moveup:"arrow-up",movedown:"arrow-down"},icon_prefix:"glyphicon glyphicon-"});f.defaults.iconlibs.fontawesome3=f.AbstractIconLib.extend({mapping:{collapse:"chevron-down",expand:"chevron-right","delete":"remove",edit:"pencil",add:"plus",cancel:"ban-circle",save:"save",moveup:"arrow-up",movedown:"arrow-down"},icon_prefix:"icon-"});f.defaults.iconlibs.fontawesome4=f.AbstractIconLib.extend({mapping:{collapse:"caret-square-o-down",
expand:"caret-square-o-right","delete":"times",edit:"pencil",add:"plus",cancel:"ban",save:"save",moveup:"arrow-up",movedown:"arrow-down"},icon_prefix:"fa fa-"});f.defaults.iconlibs.foundation2=f.AbstractIconLib.extend({mapping:{collapse:"minus",expand:"plus","delete":"remove",edit:"edit",add:"add-doc",cancel:"error",save:"checkmark",moveup:"up-arrow",movedown:"down-arrow"},icon_prefix:"foundicon-"});f.defaults.iconlibs.foundation3=f.AbstractIconLib.extend({mapping:{collapse:"minus",expand:"plus",
"delete":"x",edit:"pencil",add:"page-add",cancel:"x-circle",save:"save",moveup:"arrow-up",movedown:"arrow-down"},icon_prefix:"fi-"});f.defaults.iconlibs.jqueryui=f.AbstractIconLib.extend({mapping:{collapse:"triangle-1-s",expand:"triangle-1-e","delete":"trash",edit:"pencil",add:"plusthick",cancel:"closethick",save:"disk",moveup:"arrowthick-1-n",movedown:"arrowthick-1-s"},icon_prefix:"ui-icon ui-icon-"});f.defaults.templates["default"]=function(){return{compile:function(a){var b=a.match(/{{\s*([a-zA-Z0-9\-_ \.]+)\s*}}/g),
c=b&&b.length;if(!c)return function(){return a};for(var d=[],e=function(a){var c,e=b[a].replace(/[{}]+/g,"").trim().split("."),f=e.length;if(1<f){var g;c=function(b){g=b;for(a=0;a<f&&(g=g[e[a]],g);a++);return g}}else e=e[0],c=function(a){return a[e]};d.push({s:b[a],r:c})},f=0;f<c;f++)e(f);return function(b){var e,g=a+"";for(f=0;f<c;f++)e=d[f],g=g.replace(e.s,e.r(b));return g}}}};f.defaults.templates.ejs=function(){return!!window.EJS&&{compile:function(a){var b=new window.EJS({text:a});return function(a){return b.render(a)}}}};
f.defaults.templates.handlebars=function(){return window.Handlebars};f.defaults.templates.hogan=function(){return!!window.Hogan&&{compile:function(a){var b=window.Hogan.compile(a);return function(a){return b.render(a)}}}};f.defaults.templates.markup=function(){return!(!window.Mark||!window.Mark.up)&&{compile:function(a){return function(b){return window.Mark.up(a,b)}}}};f.defaults.templates.mustache=function(){return!!window.Mustache&&{compile:function(a){return function(b){return window.Mustache.render(a,
b)}}}};f.defaults.templates.swig=function(){return window.swig};f.defaults.templates.underscore=function(){return!!window._&&{compile:function(a){return function(b){return window._.template(a,b)}}}};f.defaults.theme="html";f.defaults.template="default";f.defaults.options={};f.defaults.translate=function(a,b){var c=f.defaults.languages[f.defaults.language];if(!c)throw"Unknown language "+f.defaults.language;c=c[a]||f.defaults.languages[f.defaults.default_language][a];if("undefined"==typeof c)throw"Unknown translate string "+
a;if(b)for(var d=0;d<b.length;d++)c=c.replace(new RegExp("\\{\\{"+d+"}}","g"),b[d]);return c};f.defaults.default_language="en";f.defaults.language=f.defaults.default_language;f.defaults.languages.en={error_notset:"Property must be set",error_notempty:"Value required",error_enum:"Value must be one of the enumerated values",error_anyOf:"Value must validate against at least one of the provided schemas",error_oneOf:"Value must validate against exactly one of the provided schemas. It currently validates against {{0}} of the schemas.",
error_not:"Value must not validate against the provided schema",error_type_union:"Value must be one of the provided types",error_type:"Value must be of type {{0}}",error_disallow_union:"Value must not be one of the provided disallowed types",error_disallow:"Value must not be of type {{0}}",error_multipleOf:"Value must be a multiple of {{0}}",error_maximum_excl:"Value must be less than {{0}}",error_maximum_incl:"Value must be at most {{0}}",error_minimum_excl:"Value must be greater than {{0}}",error_minimum_incl:"Value must be at least {{0}}",
error_maxLength:"Value must be at most {{0}} characters long",error_minLength:"Value must be at least {{0}} characters long",error_pattern:"Value must match the pattern {{0}}",error_additionalItems:"No additional items allowed in this array",error_maxItems:"Value must have at most {{0}} items",error_minItems:"Value must have at least {{0}} items",error_uniqueItems:"Os itens devem ser \u00fanicos",error_maxProperties:"Object must have at most {{0}} properties",error_minProperties:"Object must have at least {{0}} properties",
error_required:"Object is missing the required property '{{0}}'",error_additional_properties:"No additional properties allowed, but property {{0}} is set",error_dependency:"Must have property {{0}}",button_delete_all:"Todos",button_delete_all_title:"Deletar todos",button_delete_last:"\u00daltimo {{0}}",button_delete_last_title:"Deletar \u00faltimo {{0}}",button_add_row_title:"Adicionar {{0}}",button_move_down_title:"",button_move_up_title:"",button_delete_row_title:"Deletar {{0}}",button_delete_row_title_short:"",
button_collapse:"Collapse",button_expand:"Expand"};f.plugins={ace:{theme:""},epiceditor:{},sceditor:{},select2:{},selectize:{}};k(f.defaults.editors,function(a,b){f.defaults.editors[a].options=b.options||{}});f.defaults.resolvers.unshift(function(a){if("string"!=typeof a.type)return"multiple"});f.defaults.resolvers.unshift(function(a){if(!a.type&&a.properties)return"object"});f.defaults.resolvers.unshift(function(a){if("string"==typeof a.type)return a.type});f.defaults.resolvers.unshift(function(a){if("boolean"===
a.type)return"checkbox"===a.format||a.options&&a.options.checkbox?"checkbox":f.plugins.selectize.enable?"selectize":"select"});f.defaults.resolvers.unshift(function(a){if("any"===a.type)return"multiple"});f.defaults.resolvers.unshift(function(a){if("string"===a.type&&a.media&&"base64"===a.media.binaryEncoding)return"base64"});f.defaults.resolvers.unshift(function(a){if("string"===a.type&&"url"===a.format&&a.options&&!0===a.options.upload&&window.FileReader)return"upload"});f.defaults.resolvers.unshift(function(a){if("array"==
a.type&&"table"==a.format)return"table"});f.defaults.resolvers.unshift(function(a){if(a.enumSource)return f.plugins.selectize.enable?"selectize":"select"});f.defaults.resolvers.unshift(function(a){if(a["enum"]){if("array"===a.type||"object"===a.type)return"enum";if("number"===a.type||"integer"===a.type||"string"===a.type)return f.plugins.selectize.enable?"selectize":"select"}});f.defaults.resolvers.unshift(function(a){if("array"===a.type&&a.items&&!Array.isArray(a.items)&&a.uniqueItems&&0<=["string",
"number","integer"].indexOf(a.items.type)){if(a.items["enum"])return"multiselect";if(f.plugins.selectize.enable&&"string"===a.items.type)return"arraySelectize"}});f.defaults.resolvers.unshift(function(a){if(a.oneOf||a.anyOf)return"multiple"});(function(){if(window.jQuery||window.Zepto){var a=window.jQuery||window.Zepto;a.jsoneditor=f.defaults;a.fn.jsoneditor=function(a){var b=this,d=this.data("jsoneditor");if("value"===a){if(!d)throw"Must initialize jsoneditor before getting/setting the value";if(!(1<
arguments.length))return d.getValue();d.setValue(arguments[1])}else{if("validate"===a){if(!d)throw"Must initialize jsoneditor before validating";return 1<arguments.length?d.validate(arguments[1]):d.validate()}"destroy"===a?d&&(d.destroy(),this.data("jsoneditor",null)):(d&&d.destroy(),d=new f(this.get(0),a),this.data("jsoneditor",d),d.on("change",function(){b.trigger("change")}),d.on("ready",function(){b.trigger("ready")}))}return this}}})();window.JSONEditor=f}();