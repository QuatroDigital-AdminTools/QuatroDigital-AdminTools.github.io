$(document).on("ready",function(){function t(e){var a=[];e.replace(/color-([0-9]+).+(#[a-f0-9]+)/gi,function(e,t,o){a.push({sku:t,color:o})});var t={color:a};s.setValue(t),$(this).parent().removeClass("has-error")}if(schemas){var e=window.location.href.split("?")[1]||"",a=$.extend(!0,schemas.default,schemas[e]);null!=a.basis&&$.extend(!0,a,schemas[a.basis],schemas[e]),schemas=void 0;var o=window.location.href.split("?")[2]||navigator.language.split("-")[0]||navigator.userLanguage.split("-")[0];for(field in a.properties.color.items.properties){var l=a.properties.color.items.properties[field].title;a.properties.color.items.properties[field].title=l[o]||l.default}var s,r={default:{button_add_row_title:"Adicionar {{0}}",button_delete_last_title:"Deletar última {{0}}",button_delete_last:"Última {{0}}",button_delete_all_title:"Deletar todos",button_delete_all:"Todos",button_delete_row_title:"Deletar {{0}}",error_uniqueItems:"Os itens devem ser únicos"},en:{button_add_row_title:"Add {{0}}",button_delete_last_title:"Delete last {{0}}",button_delete_last:"Last {{0}}",button_delete_all_title:"Delete all",button_delete_all:"All",button_delete_row_title:"Delete {{0}}",error_uniqueItems:"Items must be unique"}};$.extend(!0,JSONEditor.defaults.languages.en,r[o]||r.default),$("#setvalue").click(function(){if(confirm("Atenção, essa ação irá alterar todo o conteúdo editado!"))try{t($("#input").val()),$(".import-toggle").click()}catch(e){$(this).parent().addClass("has-error")}}),$(".import-toggle").click(function(){$(".json-qd-v1-import-field").toggle(500)}),$(".qd-change-color").click(function(){$(".json-qd-v1-change-color").toggle(500)}),$(".code-qd-v1-output-field").each(function(){var e=$(this);e.find("button").click(function(){e.find("textarea").select(),document.execCommand("copy")})}),$(".json-qd-v1-delete-all").click(function(){confirm("Certeza que deseja apagar o conteúdo?\nTodas alterações não salvas serão apagadas!")&&$(".json-editor-btn-delete").last().click()}),s&&s.destroy(),(s=new JSONEditor($("#editor")[0],{schema:a,theme:"bootstrap3",iconlib:"fontawesome4",disable_collapse:!0,disable_edit_json:!0,disable_properties:!0,no_additional_properties:!0})).on("change",function(){var e=s.getValue(),t="";if(e.color.length){for(var o=0;o<e.color.length;o++)t+="."+a.cssClassPrefix+e.color[o].sku+" {background: "+e.color[o].color+"}\r\n";$(".qd-css-output-field textarea").val(t),$(".qd-btn-download-css").attr("href","data:text/css;charset=utf-8,"+encodeURIComponent(t)),$(".qd-btn-download-css").attr("download",a.fileName||"colors.css")}}),$(".qd-btn-css").click(function(){$(".qd-css-output-field").toggle(500,function(){$("html,body").animate({scrollTop:$("html,body").height()})})}),$(window).on("beforeunload",function(e){return(e=e||window.event)&&(e.returnValue="Certeza que deseja sair?\nAlterações não salvas serão apagadas!"),"Certeza que deseja sair?\nAlterações não salvas serão apagadas!"}),$.ajax({url:a.cssServerFile,success:function(e){t(e)}})}else alert("Não foi possível carregar a estrutura!")});